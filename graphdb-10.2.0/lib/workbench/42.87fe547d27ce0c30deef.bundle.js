(window.webpackJsonp=window.webpackJsonp||[]).push([[42,102],{144:function(n,e,i){"use strict";i.r(e);i(95);angular.module("graphdb.framework.plugins",["ngRoute","graphdb.framework.plugins.controllers"])},95:function(n,e,i){"use strict";i.r(e);i(19);function t(n,e,i,t,r,o,s,l,u){let a;const c=function(){n.clear(),r.isLicenseValid()&&t.getActiveRepository()&&!t.isActiveRepoOntopType()&&!t.isActiveRepoFedXType()&&g()};n.clear=function(){n.searchPluginsTerm="",n.plugins=[],n.displayedPlugins=[]};const g=function(){f(),a=e((function(){f()}),5e3)},f=function(){l.getPlugins(n.getActiveRepository()).success((function(e){n.plugins=n.buildPluginsArray(e.results.bindings)})).error((function(n){i.error(getError(n))})).finally((function(){n.filterResults(),n.setLoader(!1)}))};n.buildPluginsArray=function(n){return n.map(n=>({name:n.s.value,enabled:"true"===n.o.value})).filter((function(n){return"plugincontrol"!==n.name&&"literals-index"!==n.name})).sort((function(n,e){const i=n.name.toLowerCase(),t=e.name.toLowerCase();return i<t?-1:i>t?1:0}))},n.filterResults=function(){const e=n.plugins.filter(e=>-1!==e.name.indexOf(n.searchPluginsTerm));d(e)&&n.updateDisplayedPlugins(e)};const d=function(e){if(!n.displayedPlugins||n.displayedPlugins.length!==e.length)return!0;for(const i in e)if(!n.displayedPlugins.find(n=>angular.equals(n,e[i])))return!0;return!1};function p(){a&&e.cancel(a)}n.updateDisplayedPlugins=function(e){n.displayedPlugins=e,setTimeout((function(){n.applyRowStyles()}),0)},n.setLoader=function(e,i){s.cancel(n.loaderTimeout),e?n.loaderTimeout=s((function(){n.loader=e,n.loaderMessage=i}),300):n.loader=!1},n.$on("repositoryIsSet",(function(){p(),c()})),n.$on("$destroy",(function(){p(),$(window).off("resize.plugin")})),$(window).on("resize.plugin",(function(){n.applyRowStyles()})),n.applyRowStyles=function(){const e=$("#wb-plugins-pluginInPlugins").width(),i=$("tr").width(),t=Math.floor(e/i);$(".wb-plugins-row").toArray().forEach((e,i)=>{n.isGreyBackground(t,i)?$(e).addClass("grey-row"):$(e).removeClass("grey-row")})},n.isGreyBackground=function(n,e){const i=(Math.floor(e/n)+1)%2!=1,t=e%2!=0;if(n%2!=0){if(i&&!t||!i&&!t)return!0;if(i&&t||!i&&t)return!1}else{if(i&&!t||!i&&t)return!1;if(i&&t||!i&&!t)return!0}},n.togglePlugin=function(e,t){const r=n.getActiveRepository(),o=t?u.instant("deactivating.plugin",{pluginName:e}):u.instant("activating.plugin",{pluginName:e});n.setLoader(!0,o),l.togglePlugin(r,t,e).error((function(n){i.error(getError(n))})).finally((function(){f(),n.setLoader(!1)}))},n.getLoaderMessage=function(){return n.loaderMessage||u.instant("common.loading")},n.onSearchTermChanged=function(){n.filterResults()},c()}angular.module("graphdb.framework.plugins.controllers",["graphdb.framework.rest.plugins.service"]).controller("PluginsCtrl",t),t.$inject=["$scope","$interval","toastr","$repositories","$licenseService","$modal","$timeout","PluginsRestService","$translate"]}}]);
//# sourceMappingURL=42.87fe547d27ce0c30deef.bundle.js.map