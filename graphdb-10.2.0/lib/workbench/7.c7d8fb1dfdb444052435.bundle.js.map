{"version":3,"sources":["webpack:///./src/js/angular/explore/controllers.js","webpack:///./src/js/lib/FileSaver-patch.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/js/angular/utils/file-types.js"],"names":["ExploreCtrl","$scope","$http","$location","toastr","$routeParams","$repositories","ClassInstanceDetailsService","ModalService","RDF4JRepositoriesRestService","FileTypes","$jwtAuth","$translate","$languageService","$q","yasr","role","search","when","getPrincipal","then","principal","inference","appSettings","sameAs","loading","getActiveRepository","isTripleResource","tripleParam","encodeURIComponent","param","getRdfStarLocalNames","triple","localNames","slice","replace","split","forEach","uri","getLocalName","inferences","id","title","context","blanks","formats","window","editor","getQueryType","$watch","usedPrefixes","loadResource","getNamespaces","success","data","results","bindings","e","prefix","value","namespace","$on","destroy","document","getElementById","getUsedPrefixes","persistency","hideHeader","locale","getLanguage","translateHeaders","pluginsOptions","getYasrConfiguration","error","instant","getError","localName","uriParam","hash","absUrl","url","method","params","headers","details","encodeURI","exploreResource","isContextAvailable","goToGraphsViz","path","toggleOntoLoader","showLoader","yasrInnerContainer","angular","element","resultsLoader","addClass","removeClass","Promise","resolve","principalRequestPromise","$","ajax","bnodes","Accept","done","textStatus","jqXhr","setResponse","fail","downloadExport","format","encodedURI","type","response","indexOf","JSON","stringify","ua","navigator","userAgent","toLowerCase","open","extension","file","Blob","msg","changeRole","roleVar","changeInference","copyToClipboardResult","openCopyToClipboardModal","event","args","options","changeLanguage","FindResourceCtrl","$timeout","AutocompleteRestService","checkAutocompleteStatus","warningMsg","warning","allowHtml","autocompleteEnabled","getAllNamespacesForActiveRepository","namespaces","map","loader","validateRdfUri","hasAngleBrackets","lastIndexOf","length","noAngleBrackets","validProtocol","test","validPath","schemaSlashesIdx","substring","expandedUri","submit","setFormInvalid","isDirty","form","$dirty","getAutocompleteSuggestions","str","newExpandedUri","getNamespaceUriForPrefix","val","promise","query","inputChangedFn","selectedUriCallback","selected","selectedUri","name","isDefined","click","EditResourceCtrl","$modal","StatementsService","newRow","subject","object","datatype","newResource","datatypeOptions","getDatatypeOptions","activeRepository","getClassInstancesDetails","getDetails","getGraph","res","statements","buildStatements","addStatement","newRowPredicate","$setSubmitted","newRowObject","newRowContext","$valid","push","copy","$setPristine","$setUntouched","removeStatement","idx","splice","checkValid","isUndefined","validEditRow","rowform","viewTrig","templateUrl","controller","size","transformToTrig","save","timer","cancel","validateUri","check","text","count","match","undefined","trim","ViewTrigCtrl","$modalInstance","trig","dismiss","module","$inject","saveAs","view","doc","get_URL","URL","webkitURL","save_link","createElementNS","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","fs_min_size","revoke","revoker","revokeObjectURL","remove","chrome","dispatch","filesaver","event_types","i","concat","listener","call","auto_bom","blob","FileSaver","object_url","target_view","this","blob_changed","dispatch_all","fs_error","createObjectURL","location","href","safari","readyState","DONE","abortable","func","apply","arguments","create_if_not_found","create","exclusive","INIT","download","node","MouseEvent","dispatchEvent","webkitSlice","TEMPORARY","fs","root","getDirectory","dir","getFile","createWriter","writer","onwriteend","toURL","onerror","code","ABORT_ERR","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","prototype","msSaveOrOpenBlob","onwritestart","onprogress","onwrite","onabort","self","content","exports","Error","__webpack_amd_options__"],"mappings":"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","file":"7.c7d8fb1dfdb444052435.bundle.js","sourcesContent":["import 'angular/utils/file-types';\nimport YASR from 'lib/yasr.bundled';\nimport {saveAs} from 'lib/FileSaver-patch';\nimport {decodeHTML} from \"../../../app\";\nimport {YasrUtils} from \"../utils/yasr-utils\";\n\nconst modules = [\n    'ngCookies',\n    'ngRoute',\n    'ui.bootstrap',\n    'toastr',\n    'graphdb.framework.core',\n    'graphdb.framework.core.services.repositories',\n    'graphdb.framework.explore.services',\n    'graphdb.workbench.utils.filetypes'\n];\n\nangular\n    .module('graphdb.framework.explore.controllers', modules)\n    .controller('FindResourceCtrl', FindResourceCtrl)\n    .controller('ExploreCtrl', ExploreCtrl)\n    .controller('EditResourceCtrl', EditResourceCtrl)\n    .controller('ViewTrigCtrl', ViewTrigCtrl);\n\nExploreCtrl.$inject = ['$scope', '$http', '$location', 'toastr', '$routeParams', '$repositories', 'ClassInstanceDetailsService', 'ModalService', 'RDF4JRepositoriesRestService', 'FileTypes', '$jwtAuth', '$translate', '$languageService', '$q'];\n\nfunction ExploreCtrl($scope, $http, $location, toastr, $routeParams, $repositories, ClassInstanceDetailsService, ModalService, RDF4JRepositoriesRestService, FileTypes, $jwtAuth, $translate, $languageService, $q) {\n    // Defaults\n    $scope.role = $location.search().role ? $location.search().role : 'subject';\n\n    let principalRequestPromise;\n    // We need to get sameAs and inference for the current user\n    // Using $q.when to proper set values in view\n    $q.when($jwtAuth.getPrincipal())\n        .then((principal) => {\n            // Get the predefined settings for sameAs and inference per user\n            $scope.inference = principal.appSettings['DEFAULT_INFERENCE'] && !$scope.role === 'context' ? 'all' : 'explicit';\n            $scope.sameAs = principal.appSettings['DEFAULT_INFERENCE'] && principal.appSettings['DEFAULT_SAMEAS'];\n        });\n\n    $scope.loading = false;\n\n    $scope.getActiveRepository = function () {\n        return $repositories.getActiveRepository();\n    };\n\n    $scope.isTripleResource = function () {\n        return !!$scope.tripleParam;\n    };\n\n    // TODO move this to core\n    $scope.encodeURIComponent = function (param) {\n        return encodeURIComponent(param);\n    };\n\n    $scope.getRdfStarLocalNames = function (triple) {\n        let localNames = triple.slice();\n        const trimmed = triple.replace(/[<>]+/g, '');\n        trimmed.split(' ').forEach(uri => {\n            localNames = localNames.replace(uri, ClassInstanceDetailsService.getLocalName(uri));\n        });\n        return localNames;\n    };\n\n    $scope.inferences = [\n        {id: 'all', title: 'explore.explicit.implicit'},\n        {id: 'explicit', title: 'explore.explicit'},\n        {id: 'implicit', title: 'explore.implicit'}\n    ];\n    $scope.context = '';\n\n    $scope.getLocalName = function (uri) {\n        return ClassInstanceDetailsService.getLocalName(uri);\n    };\n\n    $scope.blanks = true;\n\n    $scope.formats = FileTypes;\n\n    let yasr;\n\n    window.editor = {};\n    window.editor.getQueryType = function () {\n        return 'RESOURCE';\n    };\n\n    $scope.$watch(function () {\n        return $repositories.getActiveRepository();\n    }, function () {\n        if ($scope.getActiveRepository()) {\n            if ($scope.usedPrefixes) {\n                $scope.loadResource();\n            } else {\n                RDF4JRepositoriesRestService.getNamespaces($scope.getActiveRepository())\n                    .success(function (data) {\n                        $scope.usedPrefixes = {};\n                        data.results.bindings.forEach(function (e) {\n                            $scope.usedPrefixes[e.prefix.value] = e.namespace.value;\n                        });\n                        $scope.$on('$destroy', function () {\n                            if (yasr) {\n                                yasr.destroy();\n                            }\n                        });\n                        yasr = YASR(document.getElementById('yasr'), { // eslint-disable-line new-cap\n                            //this way, the URLs in the results are prettified using the defined prefixes\n                            getUsedPrefixes: $scope.usedPrefixes,\n                            persistency: false,\n                            hideHeader: true,\n                            locale: $languageService.getLanguage(),\n                            // Additional option for translation.\n                            // For the explore view could be applied\n                            translateHeaders: true,\n                            pluginsOptions: YasrUtils.getYasrConfiguration()\n                        });\n                        $scope.loadResource();\n                    }).error(function (data) {\n                    toastr.error($translate.instant('get.namespaces.error.msg', {error: getError(data)}));\n                });\n            }\n        }\n    });\n\n    $scope.loadResource = function () {\n        if ($routeParams.prefix && $routeParams.localName && $scope.usedPrefixes[$routeParams.prefix]) {\n            // /resource/PREFIX/LOCAL -> URI = expanded PREFIX + LOCAL\n            $scope.uriParam = $scope.usedPrefixes[$routeParams.prefix] + $routeParams.localName;\n        } else if ($location.search().uri) {\n            // uri parameter -> URI\n            $scope.uriParam = $location.search().uri + ($location.hash() ? '#' + $location.hash() : '');\n        } else if ($location.search().triple) {\n            // uri parameter -> URI\n            $scope.tripleParam = $location.search().triple + ($location.hash() ? '#' + $location.hash() : '');\n        } else {\n            // absolute URI -> URI\n            $scope.uriParam = $location.absUrl();\n        }\n        if ($routeParams.context != null) {\n            $scope.context = $routeParams.context;\n        }\n        // remove angle brackets which were allowed when filling out the search input field\n        // but are forbidden when passing the uri as a query parameter\n        $scope.uriParam = $scope.uriParam && $scope.uriParam.replace(/<|>/g, \"\");\n\n        // Get resource details\n        $http({\n            url: 'rest/explore/details',\n            method: 'GET',\n            params: {\n                uri: $scope.uriParam,\n                triple: $scope.tripleParam,\n                context: $scope.context\n            },\n            headers: {\n                'Accept': 'application/json'\n            }\n        }).success(function (data) {\n            $scope.details = data;\n            $scope.context = $scope.details.context;\n            if ($scope.details.uri !== 'object') {\n                $scope.details.encodeURI = encodeURIComponent($scope.details.uri);\n            }\n        }).error(function (data) {\n            toastr.error($translate.instant('explore.error.resource.details', {data: getError(data)}));\n        });\n\n        $scope.exploreResource();\n    };\n\n    $scope.isContextAvailable = function () {\n        return $scope.context !== null && $scope.context === \"http://rdf4j.org/schema/rdf4j#SHACLShapeGraph\";\n    };\n\n    $scope.goToGraphsViz = function () {\n        $location.path('graphs-visualizations').search('uri', $scope.uriParam);\n    };\n\n    const toggleOntoLoader = function (showLoader) {\n        const yasrInnerContainer = angular.element(document.getElementById('yasr-inner'));\n        const resultsLoader = angular.element(document.getElementById('results-loader'));\n        const opacityHideClass = 'opacity-hide';\n        /* Angular b**it. For some reason the loader behaved strangely with ng-show not always showing */\n        if (showLoader) {\n            $scope.loading = true;\n            yasrInnerContainer.addClass(opacityHideClass);\n            resultsLoader.removeClass(opacityHideClass);\n        } else {\n            $scope.loading = false;\n            yasrInnerContainer.removeClass(opacityHideClass);\n            resultsLoader.addClass(opacityHideClass);\n        }\n    };\n\n    // Get resource table\n    $scope.exploreResource = function () {\n        toggleOntoLoader(true);\n        if ($routeParams.context != null) {\n            $scope.context = $routeParams.context;\n        }\n        // Remember the role in the URL so the URL is stable and leads back to the same view\n        $location.search('role', $scope.role);\n        // wait for principal request if it has not finished and then fetch graph\n        Promise.resolve(principalRequestPromise)\n            .then(() => getGraph());\n    };\n\n    function getGraph() {\n        const headers = {Accept: 'application/x-graphdb-table-results+json'};\n        $.ajax({\n            method: 'GET',\n            url: 'rest/explore/graph',\n            data: {\n                uri: $scope.uriParam,\n                triple: $scope.tripleParam,\n                inference: $scope.inference,\n                role: $scope.role,\n                bnodes: $scope.blanks,\n                sameAs: $scope.sameAs,\n                context: $scope.context\n            },\n            headers: headers\n        }).done(function (data, textStatus, jqXhr) {\n            toggleOntoLoader(false);\n            // Pass the xhr argument first as the yasr expects it that way. See https://ontotext.atlassian.net/browse/GDB-3939\n            yasr.setResponse(jqXhr, textStatus);\n        }).fail(function (data) {\n            toastr.error($translate.instant('explore.error.resource', {data: getError(data)}));\n            toggleOntoLoader(false);\n        });\n    }\n\n    $scope.downloadExport = function (format) {\n        let param;\n        let encodedURI;\n        if ($scope.uriParam) {\n            param = 'uri=';\n            encodedURI = encodeURIComponent($scope.uriParam);\n        } else {\n            param = 'triple=';\n            encodedURI = encodeURIComponent($scope.tripleParam);\n        }\n\n        $http({\n            method: 'GET',\n            url: 'rest/explore/graph?' + param + encodedURI +\n                \"&role=\" + $scope.role +\n                \"&inference=\" + $scope.inference +\n                \"&bnodes=\" + $scope.blanks +\n                \"&sameAs=\" + $scope.sameAs +\n                ($scope.context ? \"&context=\" + encodeURIComponent($scope.context) : \"\"),\n            headers: {\n                'Accept': format.type\n            }\n        }).success(function (response) {\n            let data = response;\n            if (format.type.indexOf('json') > -1) {\n                data = JSON.stringify(data);\n            }\n            // TODO: Use bowser library to get the browser type\n            const ua = navigator.userAgent.toLowerCase();\n            if (ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1) {\n                window.open('data:attachment/csv;filename=\"statements.' + format.extension + '\",' + encodeURIComponent(data), 'statements.' + format.extension);\n            } else {\n                const file = new Blob([data], {type: format.type});\n                saveAs(file, 'statements' + format.extension);\n            }\n        }).error(function (data) {\n            const msg = getError(data);\n            toastr.error(msg, $translate.instant('common.error'));\n        });\n    };\n\n    $scope.changeRole = function (roleVar) {\n        $scope.role = roleVar;\n        if ($scope.role === 'context') {\n            $scope.inference = 'explicit';\n        }\n        $scope.exploreResource();\n    };\n\n    $scope.changeInference = function (inference) {\n        $scope.inference = inference;\n        $scope.exploreResource();\n    };\n\n    $scope.copyToClipboardResult = function (uri) {\n        ModalService.openCopyToClipboardModal(uri);\n    };\n\n    $scope.$on('language-changed', function (event, args) {\n        if (yasr && yasr.options) {\n            yasr.options.locale = args.locale;\n            yasr.changeLanguage(args.locale);\n        }\n    });\n}\n\nFindResourceCtrl.$inject = ['$scope', '$http', '$location', '$repositories', '$q', '$timeout', 'toastr', 'AutocompleteRestService', 'ClassInstanceDetailsService', '$routeParams', 'RDF4JRepositoriesRestService', '$translate'];\n\nfunction FindResourceCtrl($scope, $http, $location, $repositories, $q, $timeout, toastr, AutocompleteRestService, ClassInstanceDetailsService, $routeParams, RDF4JRepositoriesRestService, $translate) {\n    $scope.submit = submit;\n    $scope.getAutocompleteSuggestions = getAutocompleteSuggestions;\n    $scope.inputChangedFn = inputChangedFn;\n    $scope.selectedUriCallback = selectedUriCallback;\n\n    $scope.selectedUri = {name: \"\"};\n\n    $scope.autocompleteEnabled = false;\n\n    if (angular.isDefined($routeParams.search)) {\n        $timeout(function () {\n            $('#resources_finder_value').val($routeParams.search);\n            $('.search-button').click();\n        }, 500);\n    }\n\n    function checkAutocompleteStatus() {\n        AutocompleteRestService.checkAutocompleteStatus()\n            .success(function (response) {\n                if (!response) {\n                    const warningMsg = decodeHTML($translate.instant('explore.autocomplete.warning.msg'));\n                    toastr.warning('', `<div class=\"autocomplete-toast\"><a href=\"autocomplete\">${warningMsg}</a></div>`,\n                        {allowHtml: true});\n                }\n                $scope.autocompleteEnabled = response;\n            })\n            .error(function () {\n                toastr.error($translate.instant('explore.error.autocomplete'));\n            });\n    }\n\n    function getAllNamespacesForActiveRepository() {\n        RDF4JRepositoriesRestService.getNamespaces($repositories.getActiveRepository())\n            .success(function (data) {\n                $scope.namespaces = data.results.bindings.map(function (e) {\n                    return {\n                        prefix: e.prefix.value,\n                        uri: e.namespace.value\n                    };\n                });\n                $scope.loader = false;\n            }).error(function (data) {\n            const msg = getError(data);\n            toastr.error(msg, $translate.instant('common.error'));\n            $scope.loader = false;\n        });\n    }\n\n    function validateRdfUri(value) {\n        // has a pair of angle brackets and the closing one is the last char of the string\n        const hasAngleBrackets = value.indexOf(\"<\") >= 0 && value.lastIndexOf(\">\") === value.length - 1;\n\n        // does not have a pair of angle bracket - if only one of the is available that is incorrect\n        const noAngleBrackets = value.indexOf(\"<\") === -1 && value.lastIndexOf(\">\") === -1;\n\n        const validProtocol = /^<?[http|urn].*>?$/.test(value) && (hasAngleBrackets || noAngleBrackets);\n        let validPath = false;\n        if (validProtocol) {\n            if (value.indexOf(\"http\") >= 0) {\n                const schemaSlashesIdx = value.indexOf('//');\n                validPath = schemaSlashesIdx > 4\n                    && value.substring(schemaSlashesIdx + 2).length > 0;\n            } else if (value.indexOf(\"urn\") >= 0) {\n                validPath = value.substring(4).length > 0;\n            }\n        }\n        return validProtocol && validPath;\n    }\n\n    let uri;\n\n    function submit(uri) {\n        function setFormInvalid(isDirty) {\n            // does not work yet\n            $timeout(function () {\n                if ($scope.form) {\n                    $scope.form.$dirty = isDirty;\n                }\n            });\n        }\n\n        if (!uri) {\n            uri = document.getElementById(\"resources_finder_value\").value;\n        }\n        if (uri && validateRdfUri(uri)) {\n            setFormInvalid(false);\n            $location\n                .path('resource')\n                .search('uri', uri);\n        } else {\n            setFormInvalid(true);\n            if (uri) {\n                toastr.error($translate.instant('explore.error.invalid.input'));\n            }\n        }\n    }\n\n    if ($scope.getActiveRepository()) {\n        checkAutocompleteStatus();\n        getAllNamespacesForActiveRepository();\n    }\n\n    // use a global var to keep old uri in order to change it when a new one appears\n    let expandedUri;\n\n    function getAutocompleteSuggestions(str) {\n        // expand prefix to uri only if the last character of the input is a colon and\n        // there are no angle brackets because they are allowed only for absolute uris\n        const ANGLE_BRACKETS_REGEX = /<|>/;\n        if (!ANGLE_BRACKETS_REGEX.test(str) && str.slice(-1) === ':') {\n            const newExpandedUri = ClassInstanceDetailsService.getNamespaceUriForPrefix($scope.namespaces, str.slice(0, -1));\n            expandedUri = (newExpandedUri !== expandedUri) ? newExpandedUri : expandedUri;\n            if (expandedUri) {\n                $(\"#resources_finder_value\").val(expandedUri);\n            }\n        }\n\n        let promise;\n        if ($scope.autocompleteEnabled) {\n            // add semicolon after the expanded uri in order to filter only by local names for this uri\n            const query = str.replace(expandedUri, expandedUri + ';');\n            promise = AutocompleteRestService.getAutocompleteSuggestions(query);\n        } else {\n            // return empty promise\n            promise = $q.when($scope.autocompleteEnabled);\n        }\n        return promise;\n    }\n\n    $scope.$on('repositoryIsSet', function () {\n        checkAutocompleteStatus();\n        getAllNamespacesForActiveRepository();\n    });\n\n    function inputChangedFn() {\n        uri = document.getElementById(\"resources_finder_value\").value;\n        $scope.form.$dirty = !(uri && validateRdfUri(uri));\n    }\n\n    function selectedUriCallback(selected) {\n        $scope.selectedUri = {name: selected.title};\n        submit($scope.selectedUri.name);\n    }\n}\n\nEditResourceCtrl.$inject = ['$scope', '$http', '$location', 'toastr', '$repositories', '$modal', '$timeout', 'ClassInstanceDetailsService', 'StatementsService', 'RDF4JRepositoriesRestService', '$translate'];\n\nfunction EditResourceCtrl($scope, $http, $location, toastr, $repositories, $modal, $timeout, ClassInstanceDetailsService, StatementsService, RDF4JRepositoriesRestService, $translate) {\n    $scope.uriParam = $location.search().uri;\n    $scope.newRow = {\n        subject: $scope.uriParam,\n        object: {\n            type: 'uri',\n            datatype: ''\n        }\n    };\n    $scope.newResource = false;\n    $scope.datatypeOptions = StatementsService.getDatatypeOptions();\n\n    $scope.activeRepository = function () {\n        return $repositories.getActiveRepository();\n    };\n\n    $scope.getClassInstancesDetails = getClassInstancesDetails;\n    $scope.addStatement = addStatement;\n    $scope.removeStatement = removeStatement;\n    $scope.getLocalName = getLocalName;\n    $scope.checkValid = checkValid;\n    $scope.validEditRow = validEditRow;\n    $scope.viewTrig = viewTrig;\n    $scope.save = save;\n\n    function getClassInstancesDetails() {\n        RDF4JRepositoriesRestService.getNamespaces($scope.activeRepository())\n            .success(function (data) {\n                $scope.namespaces = data.results.bindings.map(function (e) {\n                    return {\n                        prefix: e.prefix.value,\n                        uri: e.namespace.value\n                    };\n                });\n                $scope.loader = false;\n            }).error(function (data) {\n                const msg = getError(data);\n                toastr.error(msg, $translate.instant('common.error'));\n                $scope.loader = false;\n            });\n\n        ClassInstanceDetailsService.getDetails($scope.uriParam)\n            .success(function (data) {\n                $scope.details = data;\n                $scope.details.encodeURI = encodeURIComponent($scope.details.uri);\n            }).error(function (data) {\n                toastr.error($translate.instant('explore.error.resource.details', {data: getError(data)}));\n            });\n\n        ClassInstanceDetailsService.getGraph($scope.uriParam)\n            .then(function (res) {\n                const statements = StatementsService.buildStatements(res, $scope.uriParam);\n                $scope.statements = statements;\n                $scope.newResource = !statements.length;\n            });\n    }\n\n    $scope.$watch(function () {\n        return $repositories.getActiveRepository();\n    }, function () {\n        if ($scope.activeRepository()) {\n            $scope.getClassInstancesDetails();\n        }\n    });\n\n    $scope.validateUri = function (val) {\n        let check = true;\n        const text = val ? val : '';\n\n        if (text.indexOf(':') === -1) {\n            check = false;\n        } else {\n            const prefix = text.substring(0, text.indexOf(':'));\n            const uriForPrefixNotAvailable = ClassInstanceDetailsService.getNamespaceUriForPrefix($scope.namespaces, prefix) === '';\n            if (uriForPrefixNotAvailable) {\n                // TODO: There's this reported useless escape character for this regex, but I'm not sure if and can I fix it.\n                if (/^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/.test(text) === false) {\n                    check = false;\n                }\n\n                const count = text.match(/\\//g);\n\n                if (count === undefined || count.length < 3) {\n                    check = false;\n                }\n            } else {\n                const restText = text.substring(text.indexOf(':') + 1).trim();\n                if (restText.length < 1) {\n                    check = false;\n                }\n            }\n        }\n\n        return check;\n    };\n\n    function addStatement() {\n        $scope.newRowPredicate.$setSubmitted();\n        $scope.newRowObject.$setSubmitted();\n        $scope.newRowContext.$setSubmitted();\n        if ($scope.newRowPredicate.$valid && $scope.newRowObject.$valid && $scope.newRowContext.$valid) {\n            $scope.statements.push(angular.copy($scope.newRow));\n            $scope.newRow = {\n                subject: $scope.uriParam,\n                object: {\n                    type: 'uri',\n                    datatype: ''\n                }\n            };\n            $scope.newRowPredicate.$setPristine();\n            $scope.newRowPredicate.$setUntouched();\n            $scope.newRowObject.$setPristine();\n            $scope.newRowObject.$setUntouched();\n            $scope.newRowContext.$setPristine();\n            $scope.newRowContext.$setUntouched();\n        }\n    }\n\n    function checkValid(data) {\n        if (!angular.isUndefined(data)) {\n            return true;\n        }\n        return $translate.instant('explore.validation');\n    }\n\n    function validEditRow() {\n        return $scope.rowform.$valid;\n    }\n\n    function removeStatement(idx) {\n        $scope.statements.splice(idx, 1);\n    }\n\n    function getLocalName(uri) {\n        return ClassInstanceDetailsService.getLocalName(uri);\n    }\n\n    function viewTrig() {\n        $modal.open({\n            templateUrl: 'js/angular/explore/templates/viewTrig.html',\n            controller: 'ViewTrigCtrl',\n            size: 'lg',\n            resolve: {\n                data: function () {\n                    return StatementsService.transformToTrig($scope.statements);\n                }\n            }\n        });\n    }\n\n    function save() {\n        const method = $scope.newResource ? 'POST' : 'PUT';\n        $http({\n            method: method,\n            url: 'rest/resource?uri=' + encodeURIComponent($scope.uriParam),\n            headers: {\n                'Content-Type': 'application/x-trig'\n            },\n            data: StatementsService.transformToTrig($scope.statements)\n        }).success(function () {\n            toastr.success($translate.instant('explore.resource.saved'));\n            const timer = $timeout(function () {\n                $location.path('resource').search('uri', $scope.uriParam);\n            }, 500);\n            $scope.$on(\"$destroy\", function () {\n                $timeout.cancel(timer);\n            });\n        }).error(function (data) {\n            toastr.error(getError(data));\n        });\n    }\n}\n\nViewTrigCtrl.$inject = ['$scope', '$modalInstance', 'data'];\n\nfunction ViewTrigCtrl($scope, $modalInstance, data) {\n    $scope.trig = data;\n\n    $scope.cancel = function () {\n        $modalInstance.dismiss('cancel');\n    };\n}\n","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 2015-05-07.2\n *\n * By Eli Grey, http://eligrey.com\n * License: X11/MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t, fs_min_size = 0\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 and\n\t\t// https://github.com/eligrey/FileSaver.js/commit/485930a#commitcomment-8768047\n\t\t// for the reasoning behind the timeout and revocation flow\n\t\t, arbitrary_revoke_timeout = 500 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (view.chrome) {\n\t\t\t\trevoker();\n\t\t\t} else {\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t}\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([\"\\ufeff\", blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name) {\n\t\t\tblob = auto_bom(blob);\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, blob_changed = false\n\t\t\t\t, object_url\n\t\t\t\t, target_view\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t\t, abortable = function(func) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t, slice\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\tif (!name) {\n\t\t\t\tname = \"download\";\n\t\t\t}\n\t\t\tif (save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t//window.open('data:attachment/csv;charset=utf-8,' + object_url);\n\t\t\t\tsave_link.href = object_url;\n\t\t\t\tsave_link.download = name;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\tblob_changed = true;\n\t\t\t}\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\tname += \".download\";\n\t\t\t}\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\ttarget_view = view;\n\t\t\t}\n\t\t\tif (!req_fs) {\n\t\t\t\tfs_error();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfs_min_size += blob.size;\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t};\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\tsave();\n\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}), fs_error);\n\t\t\t}), fs_error);\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name) {\n\t\t\treturn new FileSaver(blob, name);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name) {\n\t\t\treturn navigator.msSaveOrOpenBlob(auto_bom(blob), name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function() {\n\t\tvar filesaver = this;\n\t\tfilesaver.readyState = filesaver.DONE;\n\t\tdispatch(filesaver, \"abort\");\n\t};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n  define([], function() {\n    return saveAs;\n  });\n}","module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","angular.module('graphdb.workbench.utils.filetypes', [])\n    .value('FileTypes', [\n        {name: 'JSON', type: 'application/rdf+json', extension: '.json'},\n        {name: 'JSON-LD', type: 'application/ld+json', extension: '.jsonld'},\n        {name: 'RDF-XML', type: 'application/rdf+xml', extension: '.rdf'},\n        {name: 'N3', type: 'text/rdf+n3', extension: '.n3'},\n        {name: 'N-Triples', type: 'text/plain', extension: '.nt'},\n        {name: 'N-Quads', type: 'text/x-nquads', extension: '.nq'},\n        {name: 'Turtle', type: 'text/turtle', extension: '.ttl'},\n        {name: 'Turtle*', type: 'application/x-turtlestar', extension: '.ttls'},\n        {name: 'TriX', type: 'application/trix', extension: '.trix'},\n        {name: 'TriG', type: 'application/x-trig', extension: '.trig'},\n        {name: 'TriG*', type: 'application/x-trigstar', extension: '.trigs'},\n        {name: 'Binary RDF', type: 'application/x-binary-rdf', extension: '.brf'}\n    ]);\n"],"sourceRoot":""}