#build Annotation level of Persons
#add gender from GND

PREFIX kfngoeo: <https://github.com/KfNGOe/kfngoeo#>
PREFIX kfngoei: <https://github.com/KfNGOe/kfngoei/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX schema: <http://schema.org/>
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geonames: <http://www.geonames.org/ontology#>
PREFIX gndo: <https://d-nb.info/standards/elementset/gnd#>
PREFIX gnd: <http://d-nb.info/standards/elementset/gnd#>
PREFIX tei: <http://www.tei-c.org/ns/1.0>

CONSTRUCT {
    ?s_person ?p_person ?o ;
              kfngoeo:gender ?gender ;
    .
    ?o ?p_bn ?o_bn .
}
WHERE {    
    ?s_person rdf:type kfngoeo:Person ;
			?p ?o ;   
            kfngoeo:identifier [
        		a kfngoeo:PropertyValue ;
				kfngoeo:propertyID "GND" ;
				kfngoeo:value ?gnd_person ;
    		] 
    .
    OPTIONAL{?o ?p_bn ?o_bn ;}
	.
    BIND (  IF ( ?p = kfngoeo:gender, ?nothing, ?p) AS ?p_person)
    BIND(URI(CONCAT("https://d-nb.info/gnd/", ?gnd_person)) AS ?s_gnd)
    
    ?s_gnd rdf:type gndo:DifferentiatedPerson ;
           gndo:gndIdentifier ?gnd_gnd;
           gndo:preferredNameForThePerson ?name_gnd;
           gndo:gender ?gender;
	.    
}