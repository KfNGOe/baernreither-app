(window.webpackJsonp=window.webpackJsonp||[]).push([[319],{171:function(e,t,r){"use strict";r.r(t),r.d(t,"agentFormModelMapper",(function(){return d})),r.d(t,"agentListMapper",(function(){return m})),r.d(t,"agentModelMapper",(function(){return c}));var n=r(115),o=r(240),s=r(92),i=r(20),a=r(106);const d=(e,t,r)=>{if(!e)return;const n=new o.AgentFormModel;return n.id=e.id||t.id,n.name=e.name||t.name,n.repositoryId=e.repositoryId||t.repositoryId,n.model=e.model||t.model,n.temperature.value=void 0!==e.temperature?e.temperature:t.temperature,n.topP.value=void 0!==e.topP?e.topP:t.topP,n.seed=e.seed||t.seed,n.instructions=l(e.instructions,t.instructions),u(n,r,t.assistantExtractionMethods,e.assistantExtractionMethods),n.additionalExtractionMethods.additionalExtractionMethods.forEach(t=>{t.selected=e.additionalExtractionMethods&&e.additionalExtractionMethods.some(e=>e.method===t.method)}),n},l=(e,t)=>{if(!e&&!t)return;const r=e&&e.systemInstruction||t.systemInstruction,n=e&&e.userInstruction||t.userInstruction;return new o.AgentInstructionsFormModel({systemInstruction:r,userInstruction:n,defaultSystemInstruction:t.systemInstruction,defaultUserInstruction:t.userInstruction})},u=(e,t,r,n=[])=>{const i=r.filter(e=>!n.some(t=>t.method===e.method)),d=r.find(e=>"sparql_search"===e.method);[...n,...i].forEach(r=>{const i=n.some(e=>e.method===r.method);let l="";i&&"sparql_search"===r.method&&(a.AGENT_OPERATION.CREATE===t?l="":r.sparqlQuery?l="sparqlQuery":r.ontologyGraph&&(l="ontologyGraph"));const u=t===a.AGENT_OPERATION.EDIT||t===a.AGENT_OPERATION.CLONE,m=new o.ExtractionMethodFormModel({selected:u&&i,method:r.method,sparqlOption:l,ontologyGraph:r.ontologyGraph||d.ontologyGraph,addMissingNamespaces:r.addMissingNamespaces,sparqlQuery:new s.TextFieldModel({value:r.sparqlQuery||d.sparqlQuery,minLength:1,maxLength:2380}),similarityIndex:r.similarityIndex,similarityIndexThreshold:r.similarityIndexThreshold&&new s.NumericRangeModel({value:r.similarityIndexThreshold,minValue:0,maxValue:1,step:.1}),maxNumberOfTriplesPerCall:0===r.maxNumberOfTriplesPerCall?null:r.maxNumberOfTriplesPerCall,queryTemplate:r.queryTemplate&&new s.TextFieldModel({value:r.queryTemplate,minLength:1,maxLength:2380}),retrievalConnectorInstance:r.retrievalConnectorInstance});e.assistantExtractionMethods.setExtractionMethod(m)})},m=(e,t)=>{if(!e)return new n.AgentListModel;const r=e.map(e=>c(e,t));return new n.AgentListModel(r)},c=(e,t)=>{if(!e)return;const r=Object(i.md5HashGenerator)();return new n.AgentModel({id:e.id,name:e.name,repositoryId:e.repositoryId,isRepositoryDeleted:!t.includes(e.repositoryId),model:e.model,temperature:e.temperature,topP:e.topP,seed:e.seed,instructions:M(e.instructions),assistantExtractionMethods:p(e.assistantExtractionMethods),additionalExtractionMethods:y(e.additionalExtractionMethods)},r)},p=e=>{if(e)return e.map(e=>h(e))},h=e=>{if(e)return new n.ExtractionMethodModel({method:e.method,ontologyGraph:e.ontologyGraph,addMissingNamespaces:e.addMissingNamespaces,sparqlQuery:e.sparqlQuery,similarityIndex:e.similarityIndex,similarityIndexThreshold:e.similarityIndexThreshold,maxNumberOfTriplesPerCall:e.maxNumberOfTriplesPerCall,queryTemplate:e.queryTemplate,retrievalConnectorInstance:e.retrievalConnectorInstance})},y=e=>{if(e)return e.map(e=>I(e))},I=e=>{if(e)return new n.AdditionalExtractionMethodModel({method:e.method})},M=e=>{if(e)return new n.AgentInstructionsModel({systemInstruction:e.systemInstruction,userInstruction:e.userInstruction})}}}]);