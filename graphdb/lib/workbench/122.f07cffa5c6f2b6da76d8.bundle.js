(window.webpackJsonp=window.webpackJsonp||[]).push([[122,308],{196:function(e,t,n){"use strict";n.r(t);n(9),n(42);function i(e,t,n,i,r){e.supportsStatistics=!0,e.settings={statistics:!1},e.getSettings=function(){e.loader=!0,i.getStatistics().then((function(t){e.settings.statistics="true"===t.data,e.supportsStatistics=!0}),(function(n){if(404===n.status)e.supportsStatistics=!1;else{const e=getError(n.data);t.error(e,r.instant("error.getting.settings"))}}))},e.getSettings(),e.setSettings=function(){e.loader=!0,i.toggleStatistics(e.settings.statistics).then((function(){n.close(),t.success(r.instant("saving.settings.success"))}),(function(e){const n=getError(e.data);t.error(n,r.instant("saving.settings.error"))}))},e.submitForm=function(){e.setSettings()},e.cancel=function(){n.dismiss("cancel")}}function r(e,t,n,i,r,s,o,c){e.loadingLicense=function(){return n.loadingLicense()},n.checkLicenseStatus(),e.revertToFree=function(){s.openSimpleModal({title:o.instant("confirm.operation"),message:o.instant("revert.to.free.warning.msg"),warning:!0}).result.then((function(){t.unregisterLicense().success((function(){n.checkLicenseStatus().then(()=>c.init())}))}))}}function s(e,t,n,i,r,s,o,c){e.$on("securityInit",(function(){o.isAdmin()||n.path("/license")})),e.sendLicenseToValidateAndActivate=l;const a=$(".license-textarea");function l(e){t.sendLicenseToValidate(e).success((function(n){"Invalid"!==n.licensee?(a.val(e),function(e,n){i.open({templateUrl:"js/angular/settings/modal/validate-license.html",controller:"ValidateLicenseModalCtrl",size:"lg",resolve:{license:function(){return e}}}).result.then((function(){!function(e){e||(e=a.val());if(e){const n=atob(e.replace(/\s/g,""));t.registerLicense(n).success((function(){s.history.back()})).error((function(){r.error(c.instant("license.register.error"))}))}else r.error(c.instant("no.license.code.error"))}(n)}))}(n,e)):(a.val(""),r.error(n.message))})).error((function(){r.error(c.instant("invalid.license"))}))}e.$watch("currentFile",(function(){if(e.currentFile){const n=e.currentFile;t.extractFromLicenseFile(n).success((function(e){l(e)})).error((function(){r.error(c.instant("could.not.upload.file.error"))}))}})),e.getBackToPreviousPage=function(){s.history.back()}}function o(e,t,n){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")},e.license=n}function c(e){e.loader=!0,e.setLoader=function(t){e.loader=t}}angular.module("graphdb.framework.settings.controllers",["ngCookies","ui.bootstrap","graphdb.framework.core.services.jwtauth","toastr"]).controller("ActiveLocationSettingsCtrl",i).controller("ValidateLicenseModalCtrl",o).controller("LicenseCtrl",r).controller("RegisterLicenseCtrl",s).controller("LoaderSamplesCtrl",c),i.$inject=["$scope","toastr","$uibModalInstance","LicenseRestService","$translate"],r.$inject=["$scope","LicenseRestService","$licenseService","toastr","$rootScope","ModalService","$translate","TrackingService"],s.$inject=["$scope","LicenseRestService","$location","$uibModal","toastr","$window","$jwtAuth","$translate"],o.$inject=["$scope","$uibModalInstance","license"],c.$inject=["$scope"]},306:function(e,t,n){"use strict";n.r(t);n(9),n(40),n(27),n(196),n(52),n(53),n(42),n(82),n(83);function i(e){e.interceptors.push("$unauthorizedInterceptor"),e.interceptors.push("$authenticationInterceptor")}function r(e,t,n){e.$on("$locationChangeStart",(function(){n.isLicenseHardcoded()&&"/license/register"===t.url()&&t.path("license")}))}angular.module("graphdb.framework.settings",["toastr","ui.bootstrap","graphdb.framework.rest.license.service","graphdb.framework.settings.controllers","graphdb.framework.core.interceptors.unauthorized","graphdb.framework.core.interceptors.authentication","graphdb.framework.core.services.jwtauth"]).config(i).run(r),i.$inject=["$httpProvider","$routeProvider"],r.$inject=["$rootScope","$location","$licenseService"]}}]);