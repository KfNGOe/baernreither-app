(window.webpackJsonp=window.webpackJsonp||[]).push([[6,49,66,79,80,103,105,106,107,270,271,272,273,274,319],{110:function(e,t,s){"use strict";s.r(t),s.d(t,"ChatModel",(function(){return a})),s.d(t,"ChatByDayModel",(function(){return i})),s.d(t,"ChatsListModel",(function(){return o}));var n=s(95),r=s(20);class a{static getEmptyChat(){const e={name:"· · ·",timestamp:Math.floor(Date.now()/1e3)};return new a(e,Object(r.md5HashGenerator)())}constructor(e,t){this.hashGenerator=t,this._id=e.id,this._name=e.name,this._timestamp=e.timestamp,this._chatHistory=e.chatHistory||new n.ChatItemsListModel,this.hash=this.generateHash()}generateHash(){return this.hashGenerator(JSON.stringify(this))}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this.generateHash(),this._name=e}get timestamp(){return this._timestamp}set timestamp(e){this._timestamp=e}get chatHistory(){return this._chatHistory}set chatHistory(e){this._chatHistory=e||new n.ChatItemsListModel}toRenameRequestPayload(){return{name:this._name}}}class i{constructor(e){this._day=e.day,this._timestamp=e.timestamp,this._chats=e.chats}get day(){return this._day}set day(e){this._day=e}get timestamp(){return this._timestamp}set timestamp(e){this._timestamp=e}get chats(){return this._chats}set chats(e){this._chats=e}}class o{constructor(e){this._chats=e||[],this._chatsByDay=[],this.sortByTime(),this.updateChatsByDay()}sortByTime(){this._chats.sort((e,t)=>t.timestamp-e.timestamp)}updateChatTimestamp(e,t){const s=this._chats.find(t=>t.id===e);s&&(s.timestamp=t,this.sortByTime(),this.updateChatsByDay())}updateChatName(e,t){const s=this._chats.find(t=>t.id===e);s&&(s.name=t)}deleteChat(e){this._chats=this._chats.filter(t=>t.id!==e.id),this.sortByTime(),this.updateChatsByDay()}updateChatsByDay(){this._chatsByDay=[],this._chats.forEach(e=>{const t=new Date(1e3*e.timestamp).toDateString(),s=this._chatsByDay.find(e=>e.day===t);s?s.chats.push(e):this._chatsByDay.push(new i({day:t,timestamp:1e3*e.timestamp,chats:[e]}))})}appendChat(e){this._chats.push(e),this.sortByTime(),this.updateChatsByDay()}replaceChat(e,t){this._chats=this._chats.map(s=>s.id===t.id?e:s),this.sortByTime(),this.updateChatsByDay()}isEmpty(){return 0===this._chats.length}getFirstChat(){return this._chats[0]}deselectAll(){this._chats.forEach(e=>{e.selected=!1})}selectChat(e){this.deselectAll(),this._chats.forEach(t=>{t.selected=t.id===e.id})}getChat(e){return this._chats.find(t=>t.id===e)}getNonPersistedChat(){return this._chats.find(e=>!e.id)}renameChat(e){const t=this._chats.find(t=>t.id===e.id);t&&(t.name=e.name)}get chats(){return this._chats}set chats(e){this._chats=e}get chatsByDay(){return this._chatsByDay}set chatsByDay(e){this._chatsByDay=e}}},114:function(e,t,s){"use strict";s.r(t);var n=s(239),r=(s(142),s(150)),a=s(171),i=s(241),o=s(242);function h(e,t){return{getConversation:t=>e.getConversation(t).then(e=>Object(n.chatModelMapper)(e.data)),renameConversation:t=>e.renameConversation(t.id,t.toRenameRequestPayload()).then(e=>Object(n.chatModelMapper)(e.data)),exportConversation:t=>e.exportConversation(t).then((function(e){const t=e.data,s=e.headers()["content-disposition"];let n="chat-export";return s&&(n=s.split("filename=")[1],n=n.substring(0,n.length)),{data:t,filename:n}})),askQuestion:t=>e.askQuestion(t.toAskRequestPayload()).then(e=>Object(r.chatAnswerModelMapper)(e.data)),continueChatRun:t=>{const s=t.toContinueRunRequestPayload();return e.continueChatRun(s).then(e=>Object(r.chatAnswerModelMapper)(e.data))},getConversations:(t,s)=>e.getConversations().then(e=>Object(n.chatsListMapper)(e.data)),deleteConversation:t=>e.deleteConversation(t),createConversation:t=>e.createConversation(t.toCreateChatRequestPayload()).then(e=>Object(r.chatAnswerModelMapper)(e.data)),getAgents:()=>{const s=t.getLocalReadablGraphdbRepositoryIds();return e.getAgents().then(e=>Object(a.agentListMapper)(e.data,s))},getAgent:s=>{const n=t.getLocalReadablGraphdbRepositoryIds();return e.getAgent(s).then(e=>Object(a.agentModelMapper)(e.data,n))},createAgent:s=>{const n=t.getLocalReadablGraphdbRepositoryIds();return e.createAgent(s).then(e=>Object(a.agentModelMapper)(e.data,n))},editAgent:s=>{const n=t.getLocalReadablGraphdbRepositoryIds();return e.editAgent(s).then(e=>Object(a.agentModelMapper)(e.data,n))},deleteAgent:t=>e.deleteAgent(t),explainResponse:(t,s)=>e.explainResponse(t.toExplainResponsePayload(s)).then(e=>Object(i.explainResponseMapper)(e.data)),getDefaultAgent:()=>{const s=t.getLocalReadablGraphdbRepositoryIds();return e.getAgentDefaultValues().then(e=>Object(a.agentModelMapper)(e.data,s))},explainAgentSettings:t=>e.explainAgentSettings(t).then(e=>Object(o.agentInstructionsExplainMapper)(e.data))}}angular.module("graphdb.framework.core.services.ttyg-service",["graphdb.framework.rest.ttyg.service"]).factory("TTYGService",h),h.$inject=["TTYGRestService","$repositories"]},120:function(e,t,s){"use strict";s.r(t),s.d(t,"TtygRestServiceFakeBackend",(function(){return a}));var n=s(18),r=s(88);class a{constructor(){this.conversations=[...i]}getConversations(){return new Promise(e=>{setTimeout(()=>e({data:Object(n.cloneDeep)(this.conversations)}),2e3)})}getConversation(e){return new Promise(t=>{setTimeout(()=>t({data:Object(n.cloneDeep)(this.conversations.find(t=>t.id===e))}),2e3)})}renameConversation(e,t){const s=this.conversations.find(t=>t.id===e);return s&&(s.name=t.name),Promise.resolve({data:Object(n.cloneDeep)(s)})}exportConversation(e){return console.log("Exporting conversation with id: ",e),Promise.resolve()}askQuestion(e){const t={id:"msg_Bn07kVDCYT1qmgu1G7Zw0KNe",conversationId:e.conversationId,agentId:null,message:""+e.question,role:r.CHAT_MESSAGE_ROLE.USER,timestamp:Math.floor(Date.now()/1e3)},s=this.conversations.find(t=>t.id===e.conversationId),n={id:e.conversationId,name:s?s.name:"Han Solo is a character in the Star Wars...",timestamp:Math.floor(Date.now()/1e3),messages:[{id:"msg_Bn07kVDCYT1qmgu1G7Zw0KNe_"+Date.now(),conversationId:e.conversationId,role:r.CHAT_MESSAGE_ROLE.ASSISTANT,agentId:e.agentId,message:'Certainly! Here\'s a random example that incorporates code, JSON, and a SPARQL query:\n\n### Code (Python)\n\n```python\ndef greet(name):\n    return f"Hello, {name}!"\n\nprint(greet("World"))\n```\n\n### JSON\n\n```json\n{\n    "greeting": "Hello",\n    "target": "World",\n    "language": "English"\n}\n```\n\n### SPARQL Query\n\n```sparql\nSELECT ?person ?name\nWHERE {\n    ?person a ex:Person .\n    ?person ex:hasName ?name .\n}\nLIMIT 10\n```\n\nThis example demonstrates a simple Python function for greeting, a JSON object representing a greeting structure, and a SPARQL query to retrieve names of persons from a dataset.',timestamp:Math.floor(Date.now()/1e3),name:null},{id:"msg_Bn07kVDCYT1qmgu1G7Zw0KNeс_"+Date.now(),conversationId:e.conversationId,role:r.CHAT_MESSAGE_ROLE.ASSISTANT,agentId:e.agentId,message:`Reply to '${e.question}' It seems there was an error with the query. Let me rectify this and try again.`,timestamp:Math.floor(Date.now()/1e3),name:null}]};return s&&(s.messages.push(t),s.messages.push(...n.messages)),new Promise(e=>setTimeout(()=>e({data:n}),2e3))}continueChatRun(e){alert("continueChatRun() not implemented")}deleteConversation(e){return this.conversations=this.conversations.filter(t=>t.id!==e),new Promise(e=>setTimeout(()=>e(),2e3))}createConversation(e){const t={id:"thread_"+this.conversations.length,name:"Thread "+this.conversations.length,timestamp:Math.floor(Date.now()/1e3),messages:[]};this.conversations.unshift(t);const s=Object(n.cloneDeep)(e);return s.conversationId=t.id,this.askQuestion(s)}getAgents(){return new Promise(e=>setTimeout(()=>e({data:[...o]}),2e3))}getAgent(e){return Promise.resolve({data:Object(n.cloneDeep)(o.find(t=>t.id===e))})}createAgent(e){return"err"===e.name?new Promise((e,t)=>setTimeout(()=>t({status:500,message:"Internal Server Error"}),2e3)):(o.push(e),new Promise(t=>setTimeout(()=>t({data:e}),2e3)))}editAgent(e){return"err"===e.name?new Promise((e,t)=>setTimeout(()=>t({status:500,message:"Internal Server Error"}),2e3)):(o=o.map(t=>t.id===e.id?e:t),new Promise(t=>setTimeout(()=>t({data:e}),2e3)))}deleteAgent(e){return o=o.filter(t=>t.id!==e),Promise.resolve()}getAgentDefaultValues(){return Promise.resolve({data:h})}explainAgentSettings(){return Promise.resolve({data:{}})}simulateHttpError(){return Promise.reject({status:500,message:"Internal Server Error"})}explainResponse(e){return Promise.resolve({data:{conversationId:e.conversationId,answerId:e.answerId,queryMethods:[{name:"sparql_query",rawQuery:'SELECT ?character ?name ?height WHERE {\n  ?character a voc:Character;\n             rdfs:label ?name;\n             voc:height ?height.\n  FILTER(?name = "Luke Skywalker" || ?name = "Leia Organa")\n}',query:'SELECT ?character ?name ?height WHERE {\n  ?character a voc:Character;\n             rdfs:label ?name;\n             voc:height ?height.\n  FILTER(?name = "Luke Skywalker" || ?name = "Leia Organa")\n}',queryType:"sparql",errorOutput:"Error: org.eclipse.rdf4j.query.MalformedQueryException: org.eclipse.rdf4j.query.parser.sparql.ast.VisitorException: QName 'voc:Character' uses an undefined prefix"},{name:"retrieval_search",rawQuery:'{"queries":[{"query":"pilots that work with Luke Skywalker","filter":{"document_id":"https://swapi.co/resource/human/1"},"top_k":3}]}',query:'{\n  "queries" : [ {\n    "query" : "pilots that work with Luke Skywalker",\n    "filter" : {\n      "document_id" : "https://swapi.co/resource/human/1"\n    },\n    "top_k" : 3\n  } ]\n}',queryType:"json",errorOutput:null},{name:"iri_discovery",rawQuery:"Luke Skywalker",query:"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX onto: <http://www.ontotext.com/>\nSELECT ?label ?iri {\n    ?label onto:fts ('''Luke~ Skywalker~''' '*') .\n    ?iri rdfs:label|skos:prefLabel ?label .\n}",queryType:"sparql",errorOutput:null},{name:"sparql_query",rawQuery:"SELECT ?height WHERE {\n  <https://swapi.co/resource/human/1> voc:height ?height.\n}",query:"SELECT ?height WHERE {\n  <https://swapi.co/resource/human/1> voc:height ?height.\n}",queryType:"sparql",errorOutput:"Error: org.eclipse.rdf4j.query.MalformedQueryException: org.eclipse.rdf4j.query.parser.sparql.ast.VisitorException: QName 'voc:height' uses an undefined prefix"},{name:"sparql_query",rawQuery:'PREFIX voc: <https://swapi.co/vocabulary/>\nSELECT ?name ?height WHERE {\n  ?character voc:height ?height;\n             rdfs:label ?name.\n  FILTER(?name = "Luke Skywalker" || ?name = "Leia Organa")\n}',query:'PREFIX voc: <https://swapi.co/vocabulary/>\nSELECT ?name ?height WHERE {\n  ?character voc:height ?height;\n             rdfs:label ?name.\n  FILTER(?name = "Luke Skywalker" || ?name = "Leia Organa")\n}',queryType:"sparql",errorOutput:null},{name:"fts_search",rawQuery:"Second Luke",query:"PREFIX onto: <http://www.ontotext.com/>\nDESCRIBE ?iri {\n\t?x onto:fts '''Second Luke''' .\n\t{\n\t\t?x ?p ?iri .\n\t} union {\n\t\t?iri ?p ?x .\n\t}\n}",queryType:"sparql",errorOutput:null},{name:"similarity_search",rawQuery:"Second Luke",query:"PREFIX onto: <http://www.ontotext.com/>\nDESCRIBE ?iri {\n\t?x onto:fts '''Second Luke''' .\n\t{\n\t\t?x ?p ?iri .\n\t} union {\n\t\t?iri ?p ?x .\n\t}\n}",queryType:"sparql",errorOutput:null},{name:"iri_discovery",rawQuery:"Luke Skywalker",query:"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX onto: <http://www.ontotext.com/>\nSELECT ?label ?iri {\n    ?label onto:fts ('''Luke~ Skywalker~''' '*') .\n    ?iri rdfs:label|skos:prefLabel ?label .\n}",queryType:"sparql",errorOutput:null},{name:"sparql_query",rawQuery:"SELECT ?name ?height WHERE { ?character voc:name ?name ; voc:height ?height . FILTER (?name = 'Luke Skywalker' || ?name = 'Leia Organa') }",query:"SELECT ?name ?height WHERE { ?character voc:name ?name ; voc:height ?height . FILTER (?name = 'Luke Skywalker' || ?name = 'Leia Organa') }",queryType:"sparql",errorOutput:"Error: java.lang.IllegalArgumentException: The following IRIs are not used in the data stored in GraphDB: https://swapi.co/vocabulary/name"},{name:"sparql_query",rawQuery:"SELECT ?character ?height WHERE { ?character voc:height ?height . FILTER (?character = <https://swapi.co/resource/human/1> || ?character = <https://swapi.co/resource/human/5>) }",query:"SELEdCT ?character ?height WHERE { ?character voc:height ?height . FILTER (?character = <https://swapi.co/resource/human/1> || ?character = <https://swapi.co/resource/human/5>) }",queryType:"sparql",errorOutput:null}]}})}}const i=[{id:"thread_jdQBvbkaU6JPoO48oFbC54dA",name:"Very long chat name which does not fit in the sidebar",timestamp:1725235200,messages:[]},{id:"thread_jdQBvbkaU6JPoO48oQaL76dB",name:"Test chat 2",timestamp:1725238800,messages:[]},{id:"thread_jdQBvbkaU6JPoO48oQaL76dC",name:"Test chat 3",timestamp:1725242400,messages:[]},{id:"thread_jdQBvbkaU6JPoO48oFbC54dD",name:"Test chat 4",timestamp:1697331600,messages:[]}];let o=[{id:"asst_gAPcrHQQ9ZIxD5eXWH2BNFfo",name:"agent-1",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"starwars",instructions:{systemInstruction:"\n\n",userInstruction:""},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null},{id:"asst_qMyCpCBmqxV9I2B8UoMfFzc5",name:"agent-2",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"Non existing repo",instructions:{systemInstruction:"string\n\nstring",userInstruction:"string"},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null},{id:"asst_Cr0RxobrY07WpOvvyQilEWMI",name:"Databricks-general-unbiased",model:"gpt-4o-2024-08-06",temperature:1,topP:1,seed:null,repositoryId:"starwars",instructions:{systemInstruction:"You are helpful assistant in discovering information regarding diagnostic biomarkers.",userInstruction:null},assistantExtractionMethods:[],maxNumberOfTriplesPerCall:null},{id:"asst_5GxNYTdaOh7Tl6lLl6Pya2aH",name:"Databricks-biomarkers",model:"gpt-3.5-turbo-0125",temperature:1,topP:1,seed:null,repositoryId:"biomarkers",instructions:{systemInstruction:"You're a helpful assistant in discovering new diagnostic biomarkers for given diseases. I'll submit a set of publication abstracts discussing given disease and your task is to find in the abstracts any potential new biomarkers which are not yet listed in the appropriate databases. Each abstract is preceded by identifier - its PubMed id called for short PMID. \n\nReturn the set of biomarkers listed one per row, each marker followed by the | and PMID of the respective abstract if was mentioned in.\n\nExample: \nInput: 36418457\t[Amyotrophic lateral sclerosis (ALS) is a genetically and phenotypically heterogeneous disease results in the loss of motor neurons. Mounting information points to involvement of other systems including cognitive impairment. However, neither the valid biomarker for diagnosis nor effective therapeutic intervention is available for ALS. The present study is aimed at identifying potentially genetic biomarker that improves the diagnosis and treatment of ALS patients based on the data of the Gene Expression Omnibus. We retrieved datasets and conducted a weighted gene co-expression network analysis (WGCNA) to identify ALS-related co-expression genes. Functional enrichment analysis was performed to determine the features and pathways of the main modules. We then constructed an ALS-related model using the least absolute shrinkage and selection operator (LASSO) regression analysis and verified the model by the receiver operating characteristic (ROC) curve. Besides we screened the non-preserved gene modules in FTD and ALS-mimic disorders to distinct ALS-related genes from disorders with overlapping genes and features. Altogether, 4198 common genes between datasets with the most variation were analyzed and 16 distinct modules were identified through WGCNA. Blue module had the most correlation with ALS and functionally enriched in pathways of neurodegeneration-multiple diseases', 'amyotrophic lateral sclerosis', and 'endocytosis' KEGG terms. Further, some of other modules related to ALS were enriched in 'autophagy' and 'amyotrophic lateral sclerosis'. The 30 top of hub genes were recruited to a LASSO regression model and 5 genes (BCLAF1, GNA13, ARL6IP5, ARGLU1, and YPEL5) were identified as potentially diagnostic ALS biomarkers with validating of the ROC curve and AUC value.]\n\nYour response: BCLAF1|36418457\nGNA13|36418457\nARL6IP5|36418457\nARGLU1|36418457\nYPEL5|36418457",userInstruction:null},assistantExtractionMethods:[],maxNumberOfTriplesPerCall:null},{id:"asst_qMyCpCBmqxV9I2B8UoMfFzc555",name:"agent with long name long long long long long long long long long long long long",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"Non existing repo",instructions:{systemInstruction:"string\n\nstring",userInstruction:"string"},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null},{id:"asst_qMyCpCBmqxV9I2B8UoMfFzcр555",name:"Long_agent_with_long_name_long_long_long_long_long_long_long_long_long_long_long_long",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"Non existing repo",instructions:{systemInstruction:"string\n\nstring",userInstruction:"string"},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null},{id:"asst_qMyCpCBmqxV9I2B8UoMfFzc55д5",name:"agent with long name long long long long long long long long long long long long",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"starwars",instructions:{systemInstruction:"string\n\nstring",userInstruction:"string"},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null},{id:"asst_qMyCpCBmqxV9I2B8UoMfFzcя555",name:"Long_agent_with_long_name_long_long_long_long_long_long_long_long_long_long_long_long",model:"gpt-4o",temperature:0,topP:0,seed:null,repositoryId:"starwars",instructions:{systemInstruction:"string\n\nstring",userInstruction:"string"},assistantExtractionMethods:[{ftsMethod:"fts_search"}],maxNumberOfTriplesPerCall:null}];const h={id:"id",name:"Quadro",model:"gpt-4o",temperature:.7,topP:1,seed:0,repositoryId:"test-repository",instructions:{systemInstruction:"You are a helpful, knowledgeable, and friendly assistant. Your goal is to provide clear and accurate information while being polite, respectful, and professional.",userInstruction:"If you need to write a SPARQL query, use only the classes and properties provided in the schema and don't invent or guess any. Always try to return human-readable names or labels and not only the IRIs. If SPARQL fails to provide the necessary information you can try another tool too."},assistantExtractionMethods:[{method:"sparql_search",ontologyGraph:"http://example.com",sparqlQuery:"CONSTRUCT {?s ?p ?o} WHERE {GRAPH <http://example.org/ontology> {?s ?p ?o .}}"},{method:"fts_search",maxNumberOfTriplesPerCall:0},{method:"similarity_search",similarityIndex:"similarity-index",similarityIndexThreshold:.6,maxNumberOfTriplesPerCall:0},{method:"retrieval_search",retrievalConnectorInstance:"retrieval-connector",queryTemplate:'{"query": "string"}',maxNumberOfTriplesPerCall:0}],additionalExtractionMethods:[{method:"iri_discovery_search"}]}},121:function(e,t,s){"use strict";s.r(t),s.d(t,"ChatAnswerModel",(function(){return n})),s.d(t,"ContinueChatRun",(function(){return r}));class n{constructor(e={}){this._chatId=e.chatId,this._chatName=e.chatName||"",this._timestamp=e.timestamp,this._messages=e.messages||[],this._continueRunId=e.continueRunId}get chatId(){return this._chatId}set chatId(e){this._chatId=e}get chatName(){return this._chatName}set chatName(e){this._chatName=e}get timestamp(){return this._timestamp}set timestamp(e){this._timestamp=e}get messages(){return this._messages}set messages(e){this._messages=e}get continueRunId(){return this._continueRunId}set continueRunId(e){this._continueRunId=e}}class r{constructor(e,t){this._chatItem=e,this._runId=t}get chatId(){return this._chatItem.chatId}toContinueRunRequestPayload(){return{conversationId:this.chatId,runId:this._runId,agentId:this._chatItem.agentId,tzOffset:-(new Date).getTimezoneOffset()}}}},131:function(e,t,s){"use strict";s.r(t),s.d(t,"ExplainResponseModel",(function(){return n})),s.d(t,"ExplainQueryMethodsListModel",(function(){return r})),s.d(t,"ExplainQueryMethodModel",(function(){return a})),s.d(t,"ExplainQueryType",(function(){return i}));class n{constructor(e={}){this._chatId=e.chatId,this._answerId=e.answerId,this._queryMethods=e.queryMethods,this._expanded=void 0===e.expanded||e.expanded}get chatId(){return this._chatId}set chatId(e){this._chatId=e}get answerId(){return this._answerId}set answerId(e){this._answerId=e}get queryMethods(){return this._queryMethods}set queryMethods(e){this._queryMethods=e}get expanded(){return this._expanded}set expanded(e){this._expanded=e}}class r{constructor(e=[]){this._items=e}get items(){return this._items}set items(e){this._items=e}}class a{constructor(e={}){this._name=e.name,this._rawQuery=e.rawQuery,this._query=e.query,this._queryType=e.queryType,this._errorMessage=e.errorOutput}get name(){return this._name}set name(e){this._name=e}get rawQuery(){return this._rawQuery}set rawQuery(e){this._rawQuery=e}get query(){return this._query}set query(e){this._query=e}get queryType(){return this._queryType}set queryType(e){this._queryType=e}get errorMessage(){return this._errorMessage}set errorMessage(e){this._errorMessage=e}}const i={SPARQL:"sparql",JSON:"json",OTHER:"other"}},142:function(e,t,s){"use strict";s.r(t);var n=s(120);angular.module("graphdb.framework.rest.ttyg.service",[]).factory("TTYGRestService",r),r.$inject=["$http"];function r(e){new n.TtygRestServiceFakeBackend;return{getConversation:t=>e.get("rest/chat/conversations/"+t),renameConversation:(t,s)=>e.put("rest/chat/conversations/"+t,s),exportConversation:t=>e.get("rest/chat/conversations/export/"+t,{responseType:"blob"}),askQuestion:t=>e.post("rest/chat/conversations",t),continueChatRun:t=>e.post("rest/chat/conversations/continue",t),getConversations:()=>e.get("rest/chat/conversations"),deleteConversation:t=>e.delete("rest/chat/conversations/"+t),createConversation:(t={})=>e.post("rest/chat/conversations",t),getAgents:()=>e.get("rest/chat/agents"),getAgent:t=>e.get("rest/chat/agents/"+t),createAgent:t=>e.post("rest/chat/agents",t),editAgent:t=>e.put("rest/chat/agents",t),deleteAgent:t=>e.delete("rest/chat/agents/"+t),explainResponse:(t={})=>e.post("rest/chat/conversations/explain",t),getAgentDefaultValues:()=>e.get("rest/chat/agents/default"),explainAgentSettings:t=>e.post("rest/chat/agents/explain",t)}}},150:function(e,t,s){"use strict";s.r(t),s.d(t,"chatMessageModelListMapper",(function(){return i})),s.d(t,"chatItemsModelMapper",(function(){return o})),s.d(t,"chatMessageModelMapper",(function(){return h})),s.d(t,"chatAnswerModelMapper",(function(){return d}));var n=s(88),r=s(95),a=s(121);const i=e=>e?e.map(e=>h(e)):[],o=(e=[])=>{const t=[];let s;return e.forEach(e=>{const a=e.conversationId;n.CHAT_MESSAGE_ROLE.USER===e.role?(s&&t.push(s),s=new r.ChatItemModel(a,h(e))):(s||(s=new r.ChatItemModel(a,null)),s.answers.push(h(e)),s.agentId=e.agentId)}),s&&t.push(s),new r.ChatItemsListModel(t)},h=e=>{if(e)return new n.ChatMessageModel({id:e.id,role:e.role,message:e.message,timestamp:e.timestamp,data:e})},d=e=>{if(e)return new a.ChatAnswerModel({chatId:e.id,chatName:e.name,timestamp:e.timestamp,messages:i(e.messages),continueRunId:e.continueRunId})}},171:function(e,t,s){"use strict";s.r(t),s.d(t,"agentFormModelMapper",(function(){return h})),s.d(t,"agentListMapper",(function(){return c})),s.d(t,"agentModelMapper",(function(){return l}));var n=s(115),r=s(240),a=s(92),i=s(20),o=s(106);const h=(e,t,s)=>{if(!e)return;const n=new r.AgentFormModel;return n.id=e.id||t.id,n.name=e.name||t.name,n.repositoryId=e.repositoryId||t.repositoryId,n.model=e.model||t.model,n.temperature.value=void 0!==e.temperature?e.temperature:t.temperature,n.topP.value=void 0!==e.topP?e.topP:t.topP,n.seed=e.seed||t.seed,n.instructions=d(e.instructions,t.instructions),u(n,s,t.assistantExtractionMethods,e.assistantExtractionMethods),n.additionalExtractionMethods.additionalExtractionMethods.forEach(t=>{t.selected=e.additionalExtractionMethods&&e.additionalExtractionMethods.some(e=>e.method===t.method)}),n},d=(e,t)=>{if(!e&&!t)return;const s=e&&e.systemInstruction||t.systemInstruction,n=e&&e.userInstruction||t.userInstruction;return new r.AgentInstructionsFormModel({systemInstruction:s,userInstruction:n,defaultSystemInstruction:t.systemInstruction,defaultUserInstruction:t.userInstruction})},u=(e,t,s,n=[])=>{const i=s.filter(e=>!n.some(t=>t.method===e.method)),h=s.find(e=>"sparql_search"===e.method);[...n,...i].forEach(s=>{const i=n.some(e=>e.method===s.method);let d="";i&&"sparql_search"===s.method&&(o.AGENT_OPERATION.CREATE===t?d="":s.sparqlQuery?d="sparqlQuery":s.ontologyGraph&&(d="ontologyGraph"));const u=t===o.AGENT_OPERATION.EDIT||t===o.AGENT_OPERATION.CLONE,c=new r.ExtractionMethodFormModel({selected:u&&i,method:s.method,sparqlOption:d,ontologyGraph:s.ontologyGraph||h.ontologyGraph,addMissingNamespaces:s.addMissingNamespaces,sparqlQuery:new a.TextFieldModel({value:s.sparqlQuery||h.sparqlQuery,minLength:1,maxLength:2380}),similarityIndex:s.similarityIndex,similarityIndexThreshold:s.similarityIndexThreshold&&new a.NumericRangeModel({value:s.similarityIndexThreshold,minValue:0,maxValue:1,step:.1}),maxNumberOfTriplesPerCall:0===s.maxNumberOfTriplesPerCall?null:s.maxNumberOfTriplesPerCall,queryTemplate:s.queryTemplate&&new a.TextFieldModel({value:s.queryTemplate,minLength:1,maxLength:2380}),retrievalConnectorInstance:s.retrievalConnectorInstance});e.assistantExtractionMethods.setExtractionMethod(c)})},c=(e,t)=>{if(!e)return new n.AgentListModel;const s=e.map(e=>l(e,t));return new n.AgentListModel(s)},l=(e,t)=>{if(!e)return;const s=Object(i.md5HashGenerator)();return new n.AgentModel({id:e.id,name:e.name,repositoryId:e.repositoryId,isRepositoryDeleted:!t.includes(e.repositoryId),model:e.model,temperature:e.temperature,topP:e.topP,seed:e.seed,instructions:_(e.instructions),assistantExtractionMethods:m(e.assistantExtractionMethods),additionalExtractionMethods:g(e.additionalExtractionMethods)},s)},m=e=>{if(e)return e.map(e=>p(e))},p=e=>{if(e)return new n.ExtractionMethodModel({method:e.method,ontologyGraph:e.ontologyGraph,addMissingNamespaces:e.addMissingNamespaces,sparqlQuery:e.sparqlQuery,similarityIndex:e.similarityIndex,similarityIndexThreshold:e.similarityIndexThreshold,maxNumberOfTriplesPerCall:e.maxNumberOfTriplesPerCall,queryTemplate:e.queryTemplate,retrievalConnectorInstance:e.retrievalConnectorInstance})},g=e=>{if(e)return e.map(e=>y(e))},y=e=>{if(e)return new n.AdditionalExtractionMethodModel({method:e.method})},_=e=>{if(e)return new n.AgentInstructionsModel({systemInstruction:e.systemInstruction,userInstruction:e.userInstruction})}},172:function(e,t,s){"use strict";s.r(t),s.d(t,"AgentInstructionsExplain",(function(){return n})),s.d(t,"AgentInstructionsExplainList",(function(){return r}));class n{constructor(e){this._type=e.type,this._content=e.content,this._size=e.size}get size(){return this._size}set size(e){this._size=e}get content(){return this._content}set content(e){this._content=e}get type(){return this._type}set type(e){this._type=e}}class r{constructor(e){this._instructions=e.instructions}get instructions(){return this._instructions}set instructions(e){this._instructions=e}}},239:function(e,t,s){"use strict";s.r(t),s.d(t,"chatsListMapper",(function(){return h})),s.d(t,"chatModelMapper",(function(){return d}));var n=s(110),r=s(20),a=s(150),i=s(95);const o=Object(r.md5HashGenerator)(),h=e=>{if(!e)return new n.ChatsListModel;const t=e.map(e=>d(e));return new n.ChatsListModel(t)},d=e=>{if(e)return new n.ChatModel({id:e.id,name:e.name,timestamp:e.timestamp,chatHistory:e.messages&&e.messages.length?Object(a.chatItemsModelMapper)(e.messages):new i.ChatItemsListModel},o)}},241:function(e,t,s){"use strict";s.r(t),s.d(t,"explainResponseMapper",(function(){return r})),s.d(t,"explainQueryMethodsListMapper",(function(){return a})),s.d(t,"explainQueryMethodMapper",(function(){return i}));var n=s(131);const r=e=>new n.ExplainResponseModel({chatId:e.conversationId,answerId:e.answerId,queryMethods:a(e.queryMethods)}),a=(e=[])=>new n.ExplainQueryMethodsListModel(e.map(i)),i=e=>new n.ExplainQueryMethodModel(e)},242:function(e,t,s){"use strict";s.r(t),s.d(t,"agentInstructionsExplainMapper",(function(){return r}));var n=s(172);const r=e=>e?e.map(e=>new n.AgentInstructionsExplain(e)):new n.AgentInstructionsExplainList([])},88:function(e,t,s){"use strict";s.r(t),s.d(t,"ChatMessageModel",(function(){return n})),s.d(t,"CHAT_MESSAGE_ROLE",(function(){return r}));class n{constructor(e){this._id=e.id,this._role=e.role,this._message=e.message,this._timestamp=1e3*e.timestamp}get id(){return this._id}set id(e){this._id=e}get role(){return this._role}set role(e){this._role=e}get message(){return this._message}set message(e){this._message=e}get timestamp(){return this._timestamp}set timestamp(e){this._timestamp=e}}const r={USER:"user",ASSISTANT:"assistant"}},95:function(e,t,s){"use strict";s.r(t),s.d(t,"ChatItemModel",(function(){return r})),s.d(t,"ChatItemsListModel",(function(){return a}));var n=s(88);class r{constructor(e,t){this._chatId=e,this._agentId=void 0,this._question=t,this._answers=[]}get chatId(){return this._chatId}set chatId(e){this._chatId=e}get agentId(){return this._agentId}set agentId(e){this._agentId=e}get question(){return this._question}set question(e){this._question=e}get answers(){return this._answers}set answers(e){this._answers=e}setQuestionMessage(e){this._question||(this._question=new n.ChatMessageModel({role:n.CHAT_MESSAGE_ROLE.USER})),this._question.message=e}getQuestionMessage(){return this._question.message}toCreateChatRequestPayload(){return{agentId:this._agentId,question:this._question.message}}toAskRequestPayload(){return{conversationId:this._chatId,agentId:this._agentId,question:this._question.message,tzOffset:-(new Date).getTimezoneOffset()}}toExplainResponsePayload(e){return{conversationId:this._chatId,answerId:e}}}class a{constructor(e=[]){this._items=e}isEmpty(){return 0===this._items.length}appendItem(e){this._items.push(e)}get items(){return this._items}set items(e){this._items=e||[]}getLast(){if(!this.isEmpty())return this._items[this._items.length-1]}}}}]);