name: Build project

on: 
  push:
    branches:
      - main

jobs:
  build_infra:
    name: Build infrastructure
    runs-on: ubuntu-latest
    steps:
      - name: Perform Checkout
        uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v2
        with:
          java-version: "11"
          distribution: "adopt"      
      - name: Set up Node.js
        uses: actions/setup-node@v2
        with: 
          node-version: "14.x"
      - name: Install
        run: sudo bash install.sh
      - name: Start graphdb
        run: sudo bash start_graphdb.sh &      
      - name: Connect to graphdb
        run: sudo bash connect_graphdb.sh
      - name: build .json
        run: sudo bash build_test.sh
      
        
        #https://stackoverflow.com/questions/70231685/github-actions-run-server-frontend-then-execute-tests

        #https://fleetdm.com/engineering/tips-for-github-actions-usability

        #https://www.testmo.com/guides/github-actions-parallel-testing
