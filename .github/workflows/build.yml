name: Build project

on: 
  push:
    branches:
      - main

jobs:
  build_infra:
    name: Build infrastructure
    runs-on: ubuntu-latest
    steps:
      - name: Perform Checkout
        uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v2
        with:
          java-version: "11"
          distribution: "adopt"      
      - name: Set up Node.js
        uses: actions/setup-node@v2
        with: 
          node-version: "14.x"
      - name: Install
        run: sudo bash install.sh
      - name: Start graphdb
        run: sudo bash gdb_start.sh &
      - name: Wait for graphdb
        run: sleep 15s
        shell: bash
      - name: Create repo
        run: sudo bash gdb_createRepo.sh
      - name: Get repo list
        run: sudo bash gdb_getRepo.sh      
      - name: Build ttl to ttl
        run: sudo bash build_ttl2ttl.sh
      #- name: Import data
      #  run: sudo bash gdb_importFile.sh
      #- name: Query data
      #  run: sudo bash gdb_queryRepo.sh
     #- name: build xml ID
     #  run: sudo bash build_xmlId.sh      