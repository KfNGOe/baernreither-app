@prefix dc11: <http://purl.org/dc/elements/1.1/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix wdrs: <http://www.w3.org/2007/05/powder-s#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix gndo: <https://d-nb.info/standards/elementset/gnd#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix schema: <http://schema.org/> .
@prefix wikibase: <http://wikiba.se/ontology#> .
@prefix cc: <http://creativecommons.org/ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix wdt: <http://www.wikidata.org/prop/direct/> .
@prefix spr: <http://www.w3.org/TR/rdf-sparql-query/> .
@prefix dhpluss: <https://dhplus.sbg.ac.at/shacl> .
@prefix dhpluso: <https://dhplus.sbg.ac.at/ontology#> .


<https://dhplus.sbg.ac.at/shapes/place/>
  a <http://owl.org/Ontology> ;
  dc11:title "dhPLUS Place SHACL" ;
  dc11:creator "Richard HÃ¶rmann" ;
  owl:comment "This is a SHACL shape graph for validating annd generating the data graph of the dhPLUS OWL ontology ."@en .
  # owl:imports <http://njh.me/> .

#dhplus
<https://dhplus.sbg.ac.at/ontology#E53_Place>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#creator>;
                    sh:datatype xsd:string
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#dateCreated>;
                    sh:datatype xsd:dateTime
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#dateModified>;
                    sh:datatype xsd:dateTime
                ] ;
    sh:property [
                   sh:path <https://dhplus.sbg.ac.at/ontology#datePublished>;
                   sh:datatype xsd:dateTime
                ] ;

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/gnd-local"
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/wikiData-local"
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/projSpec"
] ;

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#P87_is_identified_by> ;
                    sh:class <https://dhplus.sbg.ac.at/ontology#E48_Place_Name> ;
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#P87_is_identified_by> ;
                    sh:class <https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates> ;
                ] ;
.
#name
<https://dhplus.sbg.ac.at/ontology#E48_Place_Name>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;

    sh:not <https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates> ;
    sh:property [
                    sh:path rdfs:label ;
                    sh:datatype rdf:langString ;
                    sh:maxCount "1" ;
                    sh:languageIn "de" ;
                    sh:equals rdfs:label
                ] ;
    sh:property [
                    sh:path rdfs:label ;
                    sh:datatype rdf:langString ;
                    sh:maxCount "1" ;
                    sh:languageIn "en" ;
                    sh:equals rdfs:label
                ] ;

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#isDefinedBy> ;
                    sh:nodeKind sh:BlankNode ;
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#isReplacedBy> ;
                    sh:nodeKind sh:BlankNode ;
                ] ;
.

<https://dhplus.sbg.ac.at/ontology#DefinedPlaceOrGeographicName>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:not <https://dhplus.sbg.ac.at/ontology#ReplacedPlaceOrGeographicName> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#preferredNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#variantNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ]
.

<https://dhplus.sbg.ac.at/ontology#ReplacedPlaceOrGeographicName>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:not <https://dhplus.sbg.ac.at/ontology#DefinedPlaceOrGeographicName> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#preferredNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#variantNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ]
.

#coordinates
<https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:not <https://dhplus.sbg.ac.at/ontology#E48_Place_Name> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#isDefinedBy> ;
                    sh:nodeKind sh:BlankNode ;
                ] ;
.

<https://dhplus.sbg.ac.at/ontology#DefinedFeature>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:not <https://dhplus.sbg.ac.at/ontology#ReplacedFeature> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasDefinedGeometry> ;
                    sh:or (
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Point> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Curve> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Surface> ]
                          ) ;
                    sh:node [ sh:property [
                                              sh:path <https://dhplus.sbg.ac.at/ontology#asWKT> ;
                                              sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                                          ]
                            ]
                ] ;
.

<https://dhplus.sbg.ac.at/ontology#ReplacedFeature>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:not <https://dhplus.sbg.ac.at/ontology#DefinedFeature> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasReplacedGeometry> ;
                    sh:or (
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Point> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Curve> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Surface> ]
                          ) ;
                    sh:node [ sh:property [
                                              sh:path <https://dhplus.sbg.ac.at/ontology#asWKT> ;
                                              sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                                          ]
                            ]
                ]
.

_:E53_PlaceRuleShape
    a sh:NodeShape ;
    sh:targetClass <https://dhplus.sbg.ac.at/ontology#E53_Place> ;
    sh:rule [
                a sh:TripleRule ;
                sh:condition _:E53_PlaceShape ;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:E53_Place
            ] , [
                    a sh:TripleRule ;
                    sh:condition _:E53_PlaceShape ;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:creator ;
                    sh:object "NN"^^xsd:string
                ] , [
                        a sh:TripleRule ;
                        sh:condition _:E53_PlaceShape ;
                        sh:subject sh:this ;
                        sh:predicate dhpluso:dateCreated ;
                        sh:object "0001-01-01T00:00:00"^^xsd:dateTime
                    ] , [
                            a sh:TripleRule ;
                            sh:condition _:E53_PlaceShape ;
                            sh:subject sh:this ;
                            sh:predicate dhpluso:dateModified ;
                            sh:object "0001-01-01T00:00:00"^^xsd:dateTime
                        ] , [
                                a sh:TripleRule ;
                                sh:condition _:E53_PlaceShape ;
                                sh:subject sh:this ;
                                sh:predicate dhpluso:datePublished ;
                                sh:object "0001-01-01T00:00:00"^^xsd:dateTime
                            ] , [
                                    a sh:TripleRule ;
                                    sh:condition _:E53_PlaceShape ;
                                    sh:subject sh:this ;
                                    sh:predicate dhpluso:P87_is_identified_by ;
                                    sh:object [sh:path dhpluso:P87_is_identified_by]
                                ] , [
                                        a sh:TripleRule ;
                                        sh:condition _:E53_PlaceShape ;
                                        sh:subject sh:this ;
                                        sh:predicate dhpluso:source ;
                                        sh:object [
                                                      spr:deriveURI (
                                                                        sh:this
                                                                        "#gnd-local"
                                                                    ) ;
                                                  ] ;
                                    ] , [
                                            a sh:TripleRule ;
                                            sh:condition _:E53_PlaceShape ;
                                            sh:subject sh:this ;
                                            sh:predicate dhpluso:source ;
                                            sh:object [
                                                          spr:deriveURI (
                                                                            sh:this
                                                                            "#wikiData-local"
                                                                        ) ;
                                                      ] ;
                                        ] , [
                                                a sh:TripleRule ;
                                                sh:condition _:E53_PlaceShape ;
                                                sh:subject sh:this ;
                                                sh:predicate dhpluso:source ;
                                                sh:object [
                                                              spr:deriveURI (
                                                                                sh:this
                                                                                "#projSpec"
                                                                            ) ;
                                                          ] ;
                                            ] , [
                                                    a sh:TripleRule ;
                                                    sh:condition _:E53_PlaceShape ;
                                                    sh:subject [
                                                                   spr:deriveURI (
                                                                                     sh:this
                                                                                     "#gnd-local"
                                                                                 ) ;
                                                               ] ;
                                                    sh:predicate rdf:type ;
                                                    sh:object dhpluso:Gnd-local ;
                                                ] , [
                                                        a sh:TripleRule ;
                                                        sh:condition _:E53_PlaceShape ;
                                                        sh:subject [
                                                                       spr:deriveURI (
                                                                                         sh:this
                                                                                         "#gnd-local"
                                                                                     ) ;
                                                                   ] ;
                                                        sh:predicate dhpluso:hasPart ;
                                                        sh:object dhpluso:b0-gnd ;
                                                    ] , [
                                                            a sh:TripleRule ;
                                                            sh:condition _:E53_PlaceShape ;
                                                            sh:subject [
                                                                           spr:deriveURI (
                                                                                             sh:this
                                                                                             "#wikiData-local"
                                                                                         ) ;
                                                                       ] ;
                                                            sh:predicate rdf:type ;
                                                            sh:object dhpluso:WikiData-local ;
                                                        ] , [
                                                                a sh:TripleRule ;
                                                                sh:condition _:E53_PlaceShape ;
                                                                sh:subject [
                                                                               spr:deriveURI (
                                                                                                 sh:this
                                                                                                 "#wikiData-local"
                                                                                             ) ;
                                                                           ] ;
                                                                sh:predicate dhpluso:hasPart ;
                                                                sh:object dhpluso:b0-wikiData ;
                                                            ] , [
                                                                    a sh:TripleRule ;
                                                                    sh:condition _:E53_PlaceShape ;
                                                                    sh:subject [
                                                                                   spr:deriveURI (
                                                                                                     sh:this
                                                                                                     "#projSpec"
                                                                                                 ) ;
                                                                               ] ;
                                                                    sh:predicate rdf:type ;
                                                                    sh:object dhpluso:ProjectSpecific ;
                                                                ]
.
spr:deriveURI
    rdf:type sh:SPARQLFunction ;
    rdfs:label "derive URI" ;
    sh:parameter [
                     sh:path spr:base ;
                     sh:description "The base URI to derive from." ;
                     sh:name "base" ;
                     sh:nodeKind sh:IRI ;
                 ] ;
    sh:parameter [
                     sh:path spr:concat ;
                     sh:datatype xsd:string ;
                     sh:description "The text to concatenate to the base to produce the result." ;
                     sh:name "concat" ;
                 ] ;
#sh:prefixes <http://datashapes.org/shasf/tests/rules/triple/person2schema.test> ;
    sh:returnType rdfs:Resource ;
    sh:select """SELECT ?result
WHERE {
    BIND (IRI(CONCAT(str($base), $concat)) AS ?result)
}""" ;
.

_:E48_Place_NameRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:E48_Place_Name ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:E48_Place_Name
            ] , [
                    a sh:TripleRule;
                    sh:subject sh:this ;
                    sh:predicate rdfs:label ;
                    sh:object [
                                  sh:path (
                                              [ sh:inversePath dhpluso:P87_is_identified_by]
                                              dhpluso:source
                                              dhpluso:hasPart
                                              schema:about
                                              rdfs:label
                                          )
                              ]
                ] , [
                        a sh:TripleRule ;
                        sh:subject sh:this ;
                        sh:predicate dhpluso:isDefinedBy ;
                        sh:object [ sh:path dhpluso:isDefinedBy ]
                    ] , [
                            a sh:TripleRule ;
                            sh:subject sh:this ;
                            sh:predicate dhpluso:isReplacedBy ;
                            sh:object [ sh:path dhpluso:isReplacedBy ]
                        ]
.

_:DefinedPlaceOrGeographicNameRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:DefinedPlaceOrGeographicName ;
    sh:rule [
                a sh:TripleRule ;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:DefinedPlaceOrGeographicName
            ] , [
                    a sh:TripleRule;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:preferredNameForThePlaceOrGeographicName ;
                    sh:object [
                                  sh:path (
                                              [ sh:inversePath dhpluso:isDefinedBy]
                                              [ sh:inversePath dhpluso:P87_is_identified_by]
                                              dhpluso:source
                                              dhpluso:hasPart
                                              gndo:preferredNameForThePlaceOrGeographicName
                                          )
                              ]
                ] , [
                        a sh:TripleRule;
                        sh:subject sh:this ;
                        sh:predicate dhpluso:variantNameForThePlaceOrGeographicName ;
                        sh:object [
                                      sh:path (
                                                  [ sh:inversePath dhpluso:isDefinedBy]
                                                  [ sh:inversePath dhpluso:P87_is_identified_by]
                                                  dhpluso:source
                                                  dhpluso:hasPart
                                                  gndo:variantNameForThePlaceOrGeographicName
                                              )

                                  ]
                    ]
.

_:ReplacedPlaceOrGeographicNameRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:ReplacedPlaceOrGeographicName ;
    sh:rule [
                a sh:TripleRule ;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:ReplacedPlaceOrGeographicName ;
            ] , [
                    a sh:TripleRule;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:preferredNameForThePlaceOrGeographicName ;
                    sh:object "NN"^^xsd:string ;
                ] , [
                        a sh:TripleRule;
                        sh:subject sh:this ;
                        sh:predicate dhpluso:variantNameForThePlaceOrGeographicName ;
                        sh:object "NN"^^xsd:string ;
                    ]
.

_:E47_Spatial_CoordinatesRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:E47_Spatial_Coordinates ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:E47_Spatial_Coordinates
            ] , [
                    a sh:TripleRule ;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:isDefinedBy ;
                    sh:object [ sh:path dhpluso:isDefinedBy ]
                ] , [
                        a sh:TripleRule ;
                        sh:subject sh:this ;
                        sh:predicate dhpluso:isReplacedBy ;
                        sh:object [ sh:path dhpluso:isReplacedBy ]
                    ]
.

_:DefinedFeatureRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:DefinedFeature ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:DefinedFeature
            ], [
                   a sh:TripleRule ;
                   sh:subject sh:this ;
                   sh:predicate dhpluso:hasDefinedGeometry ;
                   sh:object [sh:path dhpluso:hasDefinedGeometry]
               ]
.

_:ReplacedFeatureRuleShape
    a sh:NodeShape ;
    sh:targetClass dhpluso:ReplacedFeature ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object dhpluso:ReplacedFeature
            ] , [
                    a sh:TripleRule ;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:hasReplacedGeometry ;
                    sh:object [sh:path dhpluso:hasReplacedGeometry]
                ]
.

_:DefinedGeometryRuleShape
    a sh:NodeShape ;
    sh:targetObjectsOf dhpluso:hasDefinedGeometry ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object [
                              sh:path (
                                          [sh:inversePath dhpluso:hasDefinedGeometry]
                                          [sh:inversePath dhpluso:isDefinedBy]
                                          [sh:inversePath dhpluso:P87_is_identified_by]
                                          dhpluso:source
                                          dhpluso:hasPart
                                          geo:hasGeometry
                                          rdf:type
                                      )
                          ]
            ] , [
                    a sh:TripleRule;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:asWKT ;
                    sh:object [
                                  sh:path (
                                              [sh:inversePath dhpluso:hasDefinedGeometry]
                                              [sh:inversePath dhpluso:isDefinedBy]
                                              [sh:inversePath dhpluso:P87_is_identified_by]
                                              dhpluso:source
                                              dhpluso:hasPart
                                              geo:hasGeometry
                                              geo:asWKT
                                          )
                              ]
                ]
.

_:ReplacedGeometryRuleShape
    a sh:NodeShape ;
    sh:targetObjectsOf dhpluso:hasReplacedGeometry ;
    sh:rule [
                a sh:TripleRule;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object geo:NN
            ] , [
                    a sh:TripleRule;
                    sh:subject sh:this ;
                    sh:predicate dhpluso:asWKT ;
                    sh:object ""^^<http://www.opengis.net/ont/geosparql#wktLiteral>
                ]
.


#gnd
<https://dhplus.sbg.ac.at/ontology#Gnd-local>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasPart> ;
                    sh:nodeKind sh:IRI
                ] .

<http://d-nb.info/standards/elementset/gnd#PlaceOrGeographicName>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:property [
                    sh:path wdrs:describedby ;
                    sh:property [
                                    sh:path dc:license ;
                                    sh:nodeKind sh:IRI ;
                                    sh:pattern "http://creativecommons.org/publicdomain/"
                                ] ;
                    sh:property [
                                   sh:path dc:modified ;
                                   sh:datatype xsd:dateTime
                               ]
                ] ;
    sh:property [
                   sh:path <http://d-nb.info/standards/elementset/gnd#gndIdentifier> ;
                   sh:datatype xsd:string
                ] ;
    sh:property [
                  sh:path owl:sameAs ;
                  sh:nodeKind sh:IRI
                ] ;
    sh:property [
                    sh:path <http://www.opengis.net/ont/geosparql#hasGeometry> ;
                    sh:property [
                                     sh:path <http://www.opengis.net/ont/geosparql#asWKT> ;
                                     sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                                 ] ;
                    sh:or (
                               [ sh:class <http://www.opengis.net/ont/sf#Point> ]
                               [ sh:class <http://www.opengis.net/ont/sf#Curve> ]
                               [ sh:class <http://www.opengis.net/ont/sf#Surface> ]
                            )
                 ] ;
    sh:property [
                    sh:path <http://d-nb.info/standards/elementset/gnd#geographicAreaCode> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://d-nb.info/standards/vocab/gnd/geographic-area-code#"
                ] ;
    sh:property [
                    sh:path <http://d-nb.info/standards/elementset/gnd#variantNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string ;
                ] ;
    sh:property [
                   sh:path <http://d-nb.info/standards/elementset/gnd#preferredNameForThePlaceOrGeographicName> ;
                   sh:datatype xsd:string
                 ] ;
.


_:GndRuleShape
    a sh:NodeShape ;
    sh:targetClass <http://d-nb.info/standards/elementset/gnd#PlaceOrGeographicName> ;
    sh:rule [
                a sh:TripleRule ;
                sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                sh:subject dhpluso:b0-gnd ;
                sh:predicate rdf:type ;
                sh:object [ sh:path rdf:type ]
            ], [
                   a sh:TripleRule ;
                   sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                   sh:subject dhpluso:b0-gnd ;
                   sh:predicate wdrs:describedby ;
                   sh:object [ sh:path wdrs:describedby ]
               ], [
                      a sh:TripleRule ;
                      sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                      sh:subject dhpluso:b0-gnd ;
                      sh:predicate gndo:gndIdentifier ;
                      sh:object [ sh:path gndo:gndIdentifier ]
                  ], [
                         a sh:TripleRule ;
                         sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                         sh:subject dhpluso:b0-gnd ;
                         sh:predicate geo:hasGeometry ;
                         sh:object [ sh:path geo:hasGeometry ]
                     ] , [
                             a sh:TripleRule ;
                             sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                             sh:subject dhpluso:b0-gnd ;
                             sh:predicate owl:sameAs ;
                             sh:object [ sh:path owl:sameAs ]
                         ] , [
                                 a sh:TripleRule ;
                             #                          sh:condition [
                             #                            sh:property [
                             #                                sh:path gndo:geographicAreaCode ;
                             #                                sh:pattern "http://d-nb.info/standards/vocab/gnd/geographic-area-code#"
                             #                             ]
                             #                         ] ;
                                 sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                                 sh:subject dhpluso:b0-gnd ;
                                 sh:predicate gndo:geographicAreaCode ;
                                 sh:object [ sh:path gndo:geographicAreaCode ]
                             ] , [
                                     a sh:TripleRule ;
                                     sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                                     sh:subject dhpluso:b0-gnd ;
                                     sh:predicate gndo:variantNameForThePlaceOrGeographicName ;
                                     sh:object [ sh:path gndo:variantNameForThePlaceOrGeographicName ]
                                 ] , [
                                         a sh:TripleRule ;
                                         sh:condition <http://d-nb.info/standards/elementset/gnd#TerritorialCorporateBodyOrAdministrativeUnit> ;
                                         sh:subject dhpluso:b0-gnd ;
                                         sh:predicate gndo:preferredNameForThePlaceOrGeographicName ;
                                         sh:object [ sh:path gndo:preferredNameForThePlaceOrGeographicName ]
                                     ] .
_:GndRuleShape-1
    a sh:NodeShape ;
    sh:targetObjectsOf wdrs:describedby ;
    sh:rule [
                a sh:TripleRule ;
                sh:subject sh:this ;
                sh:predicate dc:license ;
                sh:object [ sh:path dc:license ]
            ] , [
                    a sh:TripleRule ;
                    sh:subject sh:this ;
                    sh:predicate dc:modified ;
                    sh:object [ sh:path dc:modified ]
                ] .
_:GndRuleShape-2
    a sh:NodeShape ;
    sh:targetObjectsOf geo:hasGeometry ;
    sh:rule [
                a sh:TripleRule ;
                sh:subject sh:this ;
                sh:predicate geo:asWKT ;
                sh:object [ sh:path geo:asWKT ]
            ] , [
                    a sh:TripleRule ;
                    sh:subject sh:this ;
                    sh:predicate rdf:type ;
                    sh:object [ sh:path rdf:type ]
                ] .


#wikidata
<https://dhplus.sbg.ac.at/ontology#WikiData-local>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasPart> ;
                    sh:node schema:Dataset
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasPart> ;
                    sh:node wikibase:Item
                ] ;
.

<http://schema.org/Dataset>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
.

<http://wikiba.se/ontology#Item>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;
.

_:WikiDataDatasetShape
    a sh:NodeShape;
    sh:targetClass schema:Dataset ;
    sh:property [
                    sh:path schema:about ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://www.wikidata.org/entity/"
                ] ;
    sh:property [
                    sh:path cc:license ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://creativecommons.org/publicdomain/"
                ] ;
    sh:property [
                    sh:path schema:version ;
                    sh:datatype xsd:integer
                ] ;
    sh:property [
                    sh:path schema:dateModified ;
                    sh:datatype xsd:dateTime
                ]
.

_:WikiDataItemShape
    a sh:NodeShape;
    sh:targetObjectsOf schema:about ;
    sh:not [ sh:property [
                             sh:path rdfs:label ;
                             sh:not [
                                        sh:languageIn ("de")
                                    ]
                         ]
           ] ;
    sh:not [ sh:property [
                             sh:path rdfs:label ;
                             sh:not [
                                        sh:languageIn ("en")
                                    ]
                         ]
           ] ;
    #altitude
    sh:property [
                    sh:path wdt:P2044 ;
                    sh:datatype xsd:decimal
                ] ;
    #latitude, longitude
    sh:property [
                    sh:path wdt:P625 ;
                    sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                ]
.

_:WikiDataDatasetRuleShape
    a sh:NodeShape ;
    sh:targetClass schema:Dataset ;
    sh:rule [
                a sh:TripleRule ;
                sh:condition <http://schema.org/Dataset> ;
                sh:subject dhpluso:b0-wikiData ;
                sh:predicate rdf:type ;
                sh:object [ sh:path rdf:type ]
            ] , [
                    a sh:TripleRule ;
                    sh:condition <http://schema.org/Dataset> ;
                    sh:subject dhpluso:b0-wikiData ;
                    sh:predicate schema:about ;
                    sh:object [ sh:path schema:about ]
                ] , [
                        a sh:TripleRule ;
                        sh:condition <http://schema.org/Dataset> ;
                        sh:subject dhpluso:b0-wikiData ;
                        sh:predicate cc:license ;
                        sh:object [ sh:path cc:license ]
                    ] , [
                            a sh:TripleRule ;
                            sh:condition <http://schema.org/Dataset> ;
                            sh:subject dhpluso:b0-wikiData ;
                            sh:predicate schema:version ;
                            sh:object [ sh:path schema:version ]
                        ] , [
                                a sh:TripleRule ;
                                sh:condition <http://schema.org/Dataset> ;
                                sh:subject dhpluso:b0-wikiData ;
                                sh:predicate schema:dateModified ;
                                sh:object [ sh:path schema:dateModified ]
                            ]

.

_:WikiDataItemRuleShape
    a sh:NodeShape ;
    sh:targetObjectsOf schema:about ;
    sh:rule [
                a sh:TripleRule ;
                sh:condition _:WikiDataItemShape ;
                sh:subject sh:this ;
                sh:predicate rdf:type ;
                sh:object [ sh:path rdf:type ]
            ] , [
                    a sh:TripleRule ;
                    sh:condition _:WikiDataItemShape ;
                    sh:subject sh:this ;
                    sh:predicate rdfs:label ;
                    sh:object [
                                  spr:placeName (
                                                    [
                                                        sh:path rdfs:label
                                                    ]
                                                )
                              ] ;
                ] , [
                        a sh:TripleRule ;
                        sh:condition _:WikiDataItemShape ;
                        sh:subject sh:this ;
                        sh:predicate wdt:P625 ;
                        sh:object [ sh:path wdt:P625 ]
                    ] , [
                            a sh:TripleRule ;
                            sh:condition _:WikiDataItemShape ;
                            sh:subject sh:this ;
                            sh:predicate wdt:P2044 ;
                            sh:object [ sh:path wdt:P2044 ]
                        ]
.
spr:placeName
    rdf:type sh:SPARQLFunction ;
    sh:parameter [
                     sh:path spr:op1 ;
                     sh:datatype rdf:langString ;
                 ] ;
    sh:returnType rdf:langString ;
    sh:select """
        SELECT ($op1 AS ?result)
		{ FILTER (
		           (lang($op1) = "de")
		           ||
		           (lang($op1) = "en")
		         )
		}
    """ .


#projspec
<https://dhplus.sbg.ac.at/ontology#ProjectSpecific>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape>
.