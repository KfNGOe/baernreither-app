@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix wdt: <http://www.wikidata.org/prop/direct/> .
@prefix ecrm: <http://erlangen-crm.org/current/> .
@prefix schema: <http://schema.org/> .
@prefix wdrs: <http://www.w3.org/2007/05/powder-s#> .
@prefix cc: <http://creativecommons.org/ns#> .
@prefix dhpluso: <https://dhplus.sbg.ac.at/ontology#> .
@base <https://dhplus.sbg.ac.at/ontology/place> .

<https://dhplus.sbg.ac.at/ontology/place>
  a owl:Ontology ;
  dc:title "dhPLUS Ontologie"@de ;
  dc:title "dhPLUS Ontology"@en ;
  dct:creator "Richard HÃ¶rmann" ;
  owl:comment "This is an ontology of the dhPLUS repository for Digital Humanities Projects of the University of Salzburg."@en ;
  owl:versionInfo "0.1"^^xsd:string, "2019-12-27"^^xsd:date ;
  owl:versionIRI <https://dhplus.sbg.ac.at/ontology#/0.1> ;
  #owl:imports
.

#################################################################
#    Classes
#################################################################

#dhplus
#################################################################
<https://dhplus.sbg.ac.at/ontology#E53_Place>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;

#owl classification
    rdfs:subClassOf
      <http://erlangen-crm.org/current/E53_Place> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#PlaceSet> ;

#shacl validation
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#creator>;
                    sh:datatype xsd:string
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#dateCreated>;
                    sh:datatype xsd:dateTime
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#dateModified>;
                    sh:datatype xsd:dateTime
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#datePublished>;
                    sh:datatype xsd:dateTime
                ] ;

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/gnd-local"
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/wikiData-local"
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#source> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "/projSpec"
                ] ;

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#P1_is_identified_by> ;
                    sh:class <https://dhplus.sbg.ac.at/ontology#E48_Place_Name> ;
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#P1_is_identified_by> ;
                    sh:class <https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates> ;
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
        PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:source ?o
            }
      """ ;
            #sh:condition dhpluso:E71_Human-Made_Thing ;
            ]
.
<http://erlangen-crm.org/current/E53_Place>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Mapping> ,
      <https://dhplus.sbg.ac.at/ontology#CidocCRM> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ;
.

#name
<https://dhplus.sbg.ac.at/ontology#E48_Place_Name>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;

#owl classification
    rdfs:subClassOf
      <http://erlangen-crm.org/current/E48_Place_Name> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#PlaceSet> ;

#shacl validation
    sh:not <https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates> ;
    sh:property [
                    sh:path rdfs:label ;
                    sh:datatype rdf:langString ;
                    sh:maxCount "1" ;
                    sh:languageIn "de" ;
                    sh:equals rdfs:label
                ] ;
    sh:property [
                    sh:path rdfs:label ;
                    sh:datatype rdf:langString ;
                    sh:maxCount "1" ;
                    sh:languageIn "en" ;
                    sh:equals rdfs:label
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#isDefinedBy> ;
                    sh:nodeKind sh:BlankNode ;
                    sh:class rdfs:Class
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
        PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:source ?o
            }
      """ ;
            #sh:condition dhpluso:E71_Human-Made_Thing ;
            ]
.
<http://erlangen-crm.org/current/E48_Place_Name>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Mapping> ,
      <https://dhplus.sbg.ac.at/ontology#CidocCRM> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ;
.

_:NameShape
    a sh:NodeShape ;

#shacl validation
    sh:targetSubjectsOf [ sh:path <https://dhplus.sbg.ac.at/ontology#preferredNameForThePlaceOrGeographicName> ] ;
    sh:property [
                    sh:path rdf:type ;
                    sh:class rdfs:Class ;
                ];

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#preferredNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ] ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#variantNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
        PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:source ?o
            }
      """ ;
            #sh:condition dhpluso:E71_Human-Made_Thing ;
            ]
.

#coordinates
<https://dhplus.sbg.ac.at/ontology#E47_Spatial_Coordinates>
    a owl:Class, <http://www.w3.org/ns/shacl#NodeShape> ;

#owl classification
    rdfs:subClassOf
      <http://erlangen-crm.org/current/E47_Spatial_Coordinates> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#PlaceSet> ;

#shacl validation
    sh:not <https://dhplus.sbg.ac.at/ontology#E48_Place_Name> ;
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#isDefinedBy> ;
                    sh:nodeKind sh:BlankNode ;
                    sh:class rdfs:Class ;
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
        PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:source ?o
            }
      """ ;
            #sh:condition dhpluso:E71_Human-Made_Thing ;
            ]
.
<http://erlangen-crm.org/current/E47_Spatial_Coordinates>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Mapping> ,
      <https://dhplus.sbg.ac.at/ontology#CidocCRM> ,
      <https://dhplus.sbg.ac.at/ontology#Entity> ;
.

_:CoordinateShape
    a sh:NodeShape ;

#shacl validation
    sh:targetSubjectsOf [ sh:path <https://dhplus.sbg.ac.at/ontology#hasGeometry> ] ;
    sh:property [
                    sh:path rdf:type ;
                    sh:class rdfs:Class ;
                ];

    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasGeometry> ;
                    sh:or (
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Point> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Curve> ]
                              [ sh:class <https://dhplus.sbg.ac.at/ontology#Surface> ]
                          ) ;
                    sh:node [ sh:property [
                                              sh:path <https://dhplus.sbg.ac.at/ontology#asWKT> ;
                                              sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                                          ]
                            ]
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
        PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:source ?o
            }
      """ ;
            #sh:condition dhpluso:E71_Human-Made_Thing ;
            ]
.

#gnd
#################################################################
<https://dhplus.sbg.ac.at/ontology#Gnd-local>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#DhplusSet> ;

#shacl validation
    sh:property [
        sh:path <https://dhplus.sbg.ac.at/ontology#hasPart> ;
        sh:class <http://d-nb.info/standards/elementset/gnd#PlaceOrGeographicName> ;
    ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
            PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:dummy ?o
            }
            """ ;
                sh:condition dhpluso:MarcToBf-LoC ;
            ]
.

<http://d-nb.info/standards/elementset/gnd#PlaceOrGeographicName>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
        <https://dhplus.sbg.ac.at/ontology#Entity> ,
        <https://dhplus.sbg.ac.at/ontology#GND> ,
        <https://dhplus.sbg.ac.at/ontology#Mapping> ;

#shacl validation
    sh:property [
                    sh:path wdrs:describedby ;
                    sh:property [
                                    sh:path dc:license ;
                                    sh:nodeKind sh:IRI ;
                                    sh:pattern "http://creativecommons.org/publicdomain/"
                                ] ;
                    sh:property [
                                   sh:path dc:modified ;
                                   sh:datatype xsd:dateTime
                               ]
                ] ;
    sh:property [
                   sh:path <http://d-nb.info/standards/elementset/gnd#gndIdentifier> ;
                   sh:datatype xsd:string
                ] ;
    sh:property [
                  sh:path owl:sameAs ;
                  sh:nodeKind sh:IRI
                ] ;
    sh:property [
                    sh:path <http://www.opengis.net/ont/geosparql#hasGeometry> ;
                    sh:property [
                                     sh:path <http://www.opengis.net/ont/geosparql#asWKT> ;
                                     sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                                 ] ;
                    sh:or (
                               [ sh:class <http://www.opengis.net/ont/sf#Point> ]
                               [ sh:class <http://www.opengis.net/ont/sf#Curve> ]
                               [ sh:class <http://www.opengis.net/ont/sf#Surface> ]
                            )
                 ] ;
    sh:property [
                    sh:path <http://d-nb.info/standards/elementset/gnd#geographicAreaCode> ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://d-nb.info/standards/vocab/gnd/geographic-area-code#"
                ] ;
    sh:property [
                    sh:path <http://d-nb.info/standards/elementset/gnd#variantNameForThePlaceOrGeographicName> ;
                    sh:datatype xsd:string ;
                ] ;
    sh:property [
                   sh:path <http://d-nb.info/standards/elementset/gnd#preferredNameForThePlaceOrGeographicName> ;
                   sh:datatype xsd:string
                 ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
            PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:dummy ?o
            }
            """ ;
                sh:condition dhpluso:MarcToBf-LoC ;
            ]
.

#wikidata
#################################################################
<https://dhplus.sbg.ac.at/ontology#WikiData-local>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#DhplusSet> ;

#shacl validation
    sh:property [
                    sh:path <https://dhplus.sbg.ac.at/ontology#hasPart> ;
                    sh:class <http://schema.org/Dataset> ;
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
            PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:dummy ?o
            }
            """ ;
                sh:condition dhpluso:MarcToBf-LoC ;
            ]
.

<http://schema.org/Dataset>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#WikiData> ;

#shacl validation
    sh:property [
                    sh:path schema:about ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://www.wikidata.org/entity/"
                ] ;
    sh:property [
                    sh:path cc:license ;
                    sh:nodeKind sh:IRI ;
                    sh:pattern "http://creativecommons.org/publicdomain/"
                ] ;
    sh:property [
                    sh:path schema:version ;
                    sh:datatype xsd:integer
                ] ;
    sh:property [
                    sh:path schema:dateModified ;
                    sh:datatype xsd:dateTime
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
            PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:dummy ?o
            }
            """ ;
                sh:condition dhpluso:MarcToBf-LoC ;
            ]
.

<http://wikiba.se/ontology#Item>
    a owl:Class, sh:NodeShape ;
#owl classification
    rdfs:subClassOf
      <https://dhplus.sbg.ac.at/ontology#Entity> ,
      <https://dhplus.sbg.ac.at/ontology#WikiData> ;

#shacl validation
    sh:not [ sh:property [
                             sh:path rdfs:label ;
                             sh:not [
                                        sh:languageIn ("de")
                                    ]
                         ]
           ] ;
    sh:not [ sh:property [
                             sh:path rdfs:label ;
                             sh:not [
                                        sh:languageIn ("en")
                                    ]
                         ]
           ] ;
#altitude
    sh:property [
                    sh:path wdt:P2044 ;
                    sh:datatype xsd:decimal
                ] ;
#latitude, longitude
    sh:property [
                    sh:path wdt:P625 ;
                    sh:datatype <http://www.opengis.net/ont/geosparql#wktLiteral>
                ] ;

#sparql generation
    sh:rule [
                a sh:SPARQLRule ;
                sh:construct """
            PREFIX dhpluso: <https://dhplus.sbg.ac.at/ontology#>
            CONSTRUCT {
                ?s ?p ?o
            }
            WHERE {
                ?s dhpluso:dummy ?o
            }
            """ ;
                sh:condition dhpluso:MarcToBf-LoC ;
            ]
.
